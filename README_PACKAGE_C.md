# 📦 패키지 C — 자동모드 AI 분석 + 필드 잠금 규칙 + 리스트 검색/필터 + Admin Tools

## 🚀 주요 기능

### 1. AI 자동모드 (상품 등록)
- **자동모드 OFF**: 기존과 동일하게 프리뷰만 표시
- **자동모드 ON**: 이미지 선택 시 AI가 빈 필드를 자동으로 채움
- **필드 잠금**: 사용자가 수정한 필드는 AI가 덮어쓰지 않음
- **Mock AI**: 개발용으로 파일명 기반 간단한 분석 제공

### 2. 마켓 검색/필터
- **텍스트 검색**: 상품명과 설명에서 키워드 검색
- **카테고리 필터**: 등록된 카테고리별 필터링
- **행정동 필터**: 위치 기반 행정동별 필터링
- **실시간 필터링**: 검색어 입력 시 즉시 결과 반영
- **필터 초기화**: 모든 필터를 한 번에 해제

### 3. Admin Tools
- **권한 관리**: 환경변수로 관리자 UID 화이트리스트 관리
- **행정동 백필**: 기존 상품들의 행정동 정보 자동 보정
- **상품 미리보기**: 현재 등록된 모든 상품 목록 확인
- **실시간 로그**: 백필 진행 상황과 결과 로그 확인

## 🛠️ 사용법

### AI 자동모드 테스트
1. `/#/product/new` 접속
2. "AI 자동모드" 체크박스 활성화
3. 이미지 파일 선택 (파일명에 '축구', '농구', '테니스' 포함)
4. AI 분석 결과로 빈 필드 자동 채움 확인

### 검색/필터 테스트
1. `/#/market` 접속
2. 검색어 입력 또는 드롭다운 선택
3. 필터링된 결과 확인
4. "필터 초기화" 버튼으로 모든 필터 해제

### Admin Tools 테스트
1. `.env.development`에 관리자 UID 추가
2. `/#/admin/tools` 접속 (관리자만 접근 가능)
3. "현재 목록 행정동 백필" 버튼 클릭
4. 로그에서 진행 상황 확인

## 🎯 음성 명령

### 새로운 음성 명령
- **"검색"**: 마켓 페이지의 검색 버튼 클릭
- **"새 상품 등록"**: 상품 등록 페이지로 이동

### 기존 음성 명령
- **"마켓"**: 마켓 페이지로 이동
- **"모임 만들기"**: 모임 생성 페이지로 이동
- **"구인 등록"**: 구인 등록 페이지로 이동

## ⚙️ 환경 설정

### 필수 환경변수
```bash
# Firebase 설정
VITE_FIREBASE_API_KEY=your_firebase_api_key
VITE_FIREBASE_PROJECT_ID=jaeman-vibe-platform
VITE_FIREBASE_STORAGE_BUCKET=jaeman-vibe-platform.firebasestorage.app

# Kakao 설정
VITE_KAKAO_REST_KEY=your_kakao_rest_api_key
```

### 선택 환경변수
```bash
# AI 서버 엔드포인트 (없으면 Mock 사용)
VITE_AI_ENDPOINT=

# 관리자 UID 화이트리스트 (쉼표 구분)
VITE_ADMIN_UIDS=koHXAnJ9sXVOd4ojWxxhWNYdYOm2
```

## 🔧 기술적 구현

### AI 서비스 (`src/features/ai/services/aiService.ts`)
- Mock AI와 실제 API 호출 지원
- 필드 잠금 상태 관리
- AI 제안 적용 로직

### 필드 잠금 시스템
- 사용자 수정 필드 추적
- AI 제안 시 잠긴 필드 보호
- 실시간 잠금 상태 업데이트

### 검색/필터 엔진
- 실시간 필터링 (useMemo 최적화)
- 다중 조건 필터링
- 동적 옵션 생성

### Admin 권한 시스템
- 환경변수 기반 UID 화이트리스트
- ProtectedRoute와 연동
- 권한 없는 사용자 접근 차단

## 🧪 QA 시나리오

### 1. AI 자동모드
- [ ] 자동모드 OFF: 사진 선택 → 프리뷰만, 필드 불변
- [ ] 자동모드 ON: 사진 선택 → AI 제안으로 빈 필드만 채움
- [ ] 사용자 수정 필드 보호 확인
- [ ] 저장 → 상세로 이동, 썸네일/갤러리 정상

### 2. 마켓 검색/필터
- [ ] 검색어 입력 → 결과 즉시 반영
- [ ] 카테고리/행정동 필터 적용 → 결과 변동
- [ ] 필터 초기화 → 모든 필터 해제
- [ ] 결과 개수 표시 정확성

### 3. Admin Tools
- [ ] 관리자만 접근 가능
- [ ] 현재 목록 로딩 → 행정동 백필 실행
- [ ] dong 채움 로그 확인
- [ ] 상품 미리보기 정상 표시

### 4. 음성 명령
- [ ] "검색" → 검색 버튼 매핑
- [ ] "새 상품 등록" → 상품 등록 페이지 이동
- [ ] 기존 음성 명령 정상 동작

## 📝 커밋 메시지

```bash
feat(product): auto-mode AI suggestions with field locks, preview-only behavior kept
feat(market): client filters (text/category/dong) + UI
feat(admin): tools page for dong backfill
```

## 🔮 향후 개선사항

- **AI 모델 업그레이드**: 더 정확한 이미지 분석
- **필터 저장**: 사용자별 필터 설정 저장
- **고급 검색**: 가격 범위, 날짜 등 추가 필터
- **Admin 대시보드**: 통계 및 분석 도구
- **배치 처리**: 대량 데이터 처리 기능
