{
  "project": "YAGO VIBE - ì™„ì „ ìë™í™” ì±„íŒ… ì‹œìŠ¤í…œ",
  "version": "1.0.0",
  "description": "ì‹¤ì‹œê°„ ì±„íŒ… + 5ê°œ ì±„ë„ ì•Œë¦¼ + AI ë¶„ì„ + ìë™ ë¦¬í¬íŠ¸ + ë°ì´í„° ì‹œê°í™”",
  "author": "YAGO VIBE Team",
  "steps": [
    {
      "step": 1,
      "action": "create",
      "file": "src/pages/ChatRoom.tsx",
      "description": "ì‹¤ì‹œê°„ ì±„íŒ… ì»´í¬ë„ŒíŠ¸ - onSnapshot ê¸°ë°˜ ì–‘ë°©í–¥ ë©”ì‹œì§€",
      "priority": "high",
      "content": "import { useEffect, useState, useRef } from \"react\";\nimport { useParams, useNavigate } from \"react-router-dom\";\nimport { collection, doc, getDoc, onSnapshot, addDoc, updateDoc, serverTimestamp, setDoc, query, orderBy } from \"firebase/firestore\";\nimport { db } from \"../lib/firebase\";\nimport { getAuth } from \"firebase/auth\";\nimport { ArrowLeft } from \"lucide-react\";\n\nexport default function ChatRoom() {\n  const { id: roomId } = useParams();\n  const navigate = useNavigate();\n  const auth = getAuth();\n  const user = auth.currentUser;\n  const [messages, setMessages] = useState([]);\n  const [input, setInput] = useState(\"\");\n  const [loading, setLoading] = useState(true);\n  const [roomInfo, setRoomInfo] = useState(null);\n  const messagesEndRef = useRef(null);\n\n  useEffect(() => {\n    const initChat = async () => {\n      if (!roomId) { setLoading(false); return; }\n      try {\n        const roomRef = doc(db, \"chatRooms\", roomId);\n        const snap = await getDoc(roomRef);\n        if (!snap.exists()) {\n          await setDoc(roomRef, { createdAt: serverTimestamp(), participants: user ? [user.uid] : [], status: \"active\" });\n        } else {\n          setRoomInfo(snap.data());\n        }\n        const messagesQuery = query(collection(roomRef, \"messages\"), orderBy(\"createdAt\", \"asc\"));\n        const unsub = onSnapshot(messagesQuery, (snapshot) => {\n          setMessages(snapshot.docs.map((d) => ({ id: d.id, ...d.data() })));\n        });\n        setLoading(false);\n        return () => unsub();\n      } catch (error) { console.error(\"ì±„íŒ…ë°© ì´ˆê¸°í™” ì˜¤ë¥˜:\", error); setLoading(false); }\n    };\n    initChat();\n  }, [roomId]);\n\n  useEffect(() => { messagesEndRef.current?.scrollIntoView({ behavior: \"smooth\" }); }, [messages]);\n\n  const sendMessage = async (e) => {\n    e.preventDefault();\n    if (!input.trim() || !roomId) return;\n    try {\n      await addDoc(collection(db, \"chatRooms\", roomId, \"messages\"), { text: input.trim(), sender: user?.uid || \"anonymous\", senderName: user?.displayName || \"ìµëª…\", createdAt: serverTimestamp(), read: false });\n      await updateDoc(doc(db, \"chatRooms\", roomId), { lastMessage: input, lastMessageAt: serverTimestamp(), updatedAt: serverTimestamp() });\n      setInput(\"\");\n    } catch (error) { console.error(\"ë©”ì‹œì§€ ì „ì†¡ ì‹¤íŒ¨:\", error); }\n  };\n\n  if (loading) return <div className=\"flex items-center justify-center h-screen\"><div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mx-auto mb-4\"></div><p>ì±„íŒ…ë°©ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</p></div>;\n\n  return (\n    <div className=\"flex flex-col h-screen bg-gray-50\">\n      <header className=\"bg-white shadow-sm border-b\"><div className=\"max-w-3xl mx-auto px-4 py-3 flex items-center justify-between\"><button onClick={() => navigate(-1)} className=\"flex items-center gap-2 text-gray-600 hover:text-blue-600\"><ArrowLeft className=\"w-5 h-5\" /><span className=\"text-sm\">ë’¤ë¡œ</span></button><div className=\"text-center flex-1\"><h1 className=\"text-base font-semibold text-gray-800\">ğŸ’¬ {roomInfo?.productTitle || \"ì±„íŒ…ë°©\"}</h1><p className=\"text-xs text-gray-500\">ì‹¤ì‹œê°„ ëŒ€í™”</p></div><div className=\"w-16\"></div></div></header>\n      <div className=\"flex-1 overflow-y-auto p-4 space-y-3\">{messages.length === 0 ? <div className=\"text-center py-8\"><div className=\"text-4xl mb-4\">ğŸ’¬</div><p className=\"text-gray-500\">ì²« ë²ˆì§¸ ë©”ì‹œì§€ë¥¼ ë³´ë‚´ë³´ì„¸ìš”!</p></div> : messages.map((msg) => { const isMyMessage = msg.sender === user?.uid; return <div key={msg.id} className={`flex ${isMyMessage ? \"justify-end\" : \"justify-start\"}`}><div className={`rounded-2xl px-4 py-2 text-sm max-w-[70%] shadow-sm ${isMyMessage ? \"bg-blue-500 text-white\" : \"bg-white border\"}`}>{!isMyMessage && msg.senderName && <div className=\"text-xs text-gray-500 mb-1 font-semibold\">{msg.senderName}</div>}<div className=\"break-words\">{msg.text}</div></div></div>; })}<div ref={messagesEndRef}></div></div>\n      <form onSubmit={sendMessage} className=\"bg-white border-t shadow-lg\"><div className=\"max-w-3xl mx-auto p-3 flex gap-2\"><input className=\"flex-1 border rounded-full px-4 py-3 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500\" placeholder=\"ë©”ì‹œì§€ë¥¼ ì…ë ¥í•˜ì„¸ìš”...\" value={input} onChange={(e) => setInput(e.target.value)} autoComplete=\"off\" /><button type=\"submit\" disabled={!input.trim()} className=\"bg-blue-500 text-white rounded-full px-6 py-3 text-sm font-semibold hover:bg-blue-600 disabled:bg-gray-300\">ì „ì†¡</button></div><div className=\"bg-gray-50 px-4 py-2 text-xs text-gray-500 text-center border-t\">âœ… ì‹¤ì‹œê°„ ë™ê¸°í™” ì¤‘ â€¢ ë©”ì‹œì§€ {messages.length}ê°œ</div></form>\n    </div>\n  );\n}"
    },
    {
      "step": 2,
      "action": "create",
      "file": "src/pages/ChatListPage.tsx",
      "description": "ì±„íŒ… ëª©ë¡ í˜ì´ì§€ - ì°¸ì—¬ ì¤‘ì¸ ì±„íŒ…ë°© ë¦¬ìŠ¤íŠ¸",
      "priority": "high",
      "content": "import { useEffect, useState } from \"react\";\nimport { collection, getDocs, query, where, orderBy } from \"firebase/firestore\";\nimport { db } from \"../lib/firebase\";\nimport { getAuth } from \"firebase/auth\";\nimport { useNavigate } from \"react-router-dom\";\nimport { MessageCircle, Clock, User } from \"lucide-react\";\n\nexport default function ChatListPage() {\n  const [rooms, setRooms] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const navigate = useNavigate();\n  const auth = getAuth();\n  const user = auth.currentUser;\n\n  useEffect(() => {\n    if (!user) { setLoading(false); return; }\n    const fetchChatRooms = async () => {\n      try {\n        const q = query(collection(db, \"chatRooms\"), where(\"participants\", \"array-contains\", user.uid), orderBy(\"updatedAt\", \"desc\"));\n        const snapshot = await getDocs(q);\n        setRooms(snapshot.docs.map((doc) => ({ id: doc.id, ...doc.data() })));\n      } catch (error) { console.error(\"ì±„íŒ… ëª©ë¡ ë¡œë“œ ì‹¤íŒ¨:\", error); } finally { setLoading(false); }\n    };\n    fetchChatRooms();\n  }, [user]);\n\n  if (loading) return <div className=\"min-h-screen bg-gray-50 flex items-center justify-center\"><div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mx-auto mb-4\"></div><p>ì±„íŒ… ëª©ë¡ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</p></div>;\n  if (!user) return <div className=\"min-h-screen bg-gray-50 flex items-center justify-center\"><p className=\"text-gray-500 mb-4\">ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.</p><button onClick={() => navigate(\"/login\")} className=\"bg-blue-500 text-white px-4 py-2 rounded-lg\">ë¡œê·¸ì¸í•˜ê¸°</button></div>;\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\"><header className=\"bg-white shadow-sm border-b\"><div className=\"max-w-2xl mx-auto px-4 py-4\"><div className=\"flex items-center justify-between\"><h1 className=\"text-xl font-bold text-gray-800 flex items-center gap-2\"><MessageCircle className=\"w-6 h-6 text-blue-500\" />ì±„íŒ… ëª©ë¡</h1><button onClick={() => navigate(\"/market\")} className=\"text-blue-500 hover:text-blue-600 text-sm\">ë§ˆì¼“ìœ¼ë¡œ</button></div></div></header>\n      <main className=\"max-w-2xl mx-auto px-4 py-6\">{rooms.length === 0 ? <div className=\"text-center py-12\"><MessageCircle className=\"w-16 h-16 text-gray-300 mx-auto mb-4\" /><p className=\"text-gray-500 text-lg mb-2\">ì§„í–‰ ì¤‘ì¸ ì±„íŒ…ì´ ì—†ìŠµë‹ˆë‹¤</p><button onClick={() => navigate(\"/market\")} className=\"bg-blue-500 text-white px-6 py-3 rounded-lg\">ë§ˆì¼“ ë‘˜ëŸ¬ë³´ê¸°</button></div> : <div className=\"space-y-3\">{rooms.map((room) => <div key={room.id} onClick={() => navigate(`/chat/${room.id}`)} className=\"bg-white rounded-xl shadow-sm border p-4 cursor-pointer hover:shadow-md\"><div className=\"flex items-center gap-3\"><div className=\"w-12 h-12 bg-gray-100 rounded-lg flex items-center justify-center\">{room.productImage ? <img src={room.productImage} alt={room.productTitle} className=\"w-full h-full object-cover rounded-lg\" /> : <MessageCircle className=\"w-6 h-6 text-gray-400\" />}</div><div className=\"flex-1\"><h3 className=\"font-semibold text-gray-800 truncate\">{room.productTitle || `ìƒí’ˆ ID: ${room.productId}`}</h3>{room.lastMessage && <p className=\"text-sm text-gray-600 truncate\">{room.lastMessage}</p>}<div className=\"flex items-center gap-2 text-xs text-gray-500\"><User className=\"w-3 h-3\" /><span>ì°¸ì—¬ì {room.participants?.length || 0}ëª…</span></div></div></div></div>)}</div>}</main>\n    </div>\n  );\n}"
    },
    {
      "step": 3,
      "action": "create",
      "file": "functions/lib/chatNotificationTrigger.js",
      "description": "FCM í‘¸ì‹œ + AI ìë™ ì‘ë‹µ íŠ¸ë¦¬ê±°",
      "priority": "high",
      "content": "const functions = require(\"firebase-functions\");\nconst admin = require(\"firebase-admin\");\n\nexports.onNewChatMessage = functions.firestore.document(\"chatRooms/{roomId}/messages/{messageId}\").onCreate(async (snap, context) => {\n  const message = snap.data();\n  const { roomId } = context.params;\n  console.log(\"ğŸ“© ìƒˆ ë©”ì‹œì§€ ê°ì§€:\", message.text);\n\n  try {\n    const roomRef = admin.firestore().doc(`chatRooms/${roomId}`);\n    const roomSnap = await roomRef.get();\n    if (!roomSnap.exists) return null;\n\n    const roomData = roomSnap.data();\n    const receiver = roomData.participants?.find((uid) => uid !== message.sender);\n\n    if (receiver) {\n      const userDoc = await admin.firestore().doc(`users/${receiver}`).get();\n      const fcmToken = userDoc.data()?.fcmToken;\n      if (fcmToken) {\n        await admin.messaging().sendToDevice(fcmToken, {\n          notification: { title: `ğŸ’¬ ${roomData.productTitle || \"ìƒˆ ë©”ì‹œì§€\"}`, body: message.text },\n          data: { type: \"chat\", roomId, click_action: `/chat/${roomId}` }\n        });\n        console.log(\"âœ… FCM ì•Œë¦¼ ì „ì†¡ ì™„ë£Œ\");\n      }\n    }\n\n    // AI ìë™ ì‘ë‹µ\n    const text = message.text.toLowerCase();\n    let autoReply = null;\n    if (text.includes(\"ì‚¬ì§„\")) autoReply = \"ğŸ“¸ ìƒí’ˆ ì‚¬ì§„ì€ ìƒë‹¨ ì´ë¯¸ì§€ì—ì„œ í™•ì¸í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤!\";\n    else if (text.includes(\"ê°€ê²©\")) autoReply = \"ğŸ’° ìƒí’ˆ ê°€ê²©ì€ ìƒì„¸ í˜ì´ì§€ì—ì„œ í™•ì¸í•´ì£¼ì„¸ìš”.\";\n    else if (text.includes(\"ë°°ì†¡\")) autoReply = \"ğŸ“¦ ë°°ì†¡ ë°©ë²•ì€ íŒë§¤ìì™€ ì§ì ‘ ìƒì˜í•´ì£¼ì„¸ìš”.\";\n    else if (text.includes(\"ì•ˆë…•\")) autoReply = \"ğŸ‘‹ ì•ˆë…•í•˜ì„¸ìš”! YAGO VIBEì…ë‹ˆë‹¤.\";\n\n    if (autoReply) {\n      await admin.firestore().collection(\"chatRooms\").doc(roomId).collection(\"messages\").add({\n        text: autoReply, sender: \"system\", senderName: \"YAGO VIBE ë´‡\", createdAt: admin.firestore.FieldValue.serverTimestamp(), read: false, isAutoReply: true\n      });\n      console.log(\"ğŸ¤– AI ìë™ ì‘ë‹µ:\", autoReply);\n    }\n\n    return null;\n  } catch (error) { console.error(\"âŒ ì±„íŒ… ì•Œë¦¼ ì²˜ë¦¬ ì‹¤íŒ¨:\", error); return null; }\n});"
    },
    {
      "step": 4,
      "action": "create",
      "file": "functions/lib/n8nChatWebhook.js",
      "description": "n8n Webhook ì—°ë™ - Slack/KakaoTalk/Telegram ì•Œë¦¼",
      "priority": "high",
      "content": "const functions = require(\"firebase-functions\");\nconst admin = require(\"firebase-admin\");\n\nexports.sendChatToN8N = functions.firestore.document(\"chatRooms/{roomId}/messages/{messageId}\").onCreate(async (snap, context) => {\n  const message = snap.data();\n  const { roomId, messageId } = context.params;\n  console.log(\"ğŸ’¬ ìƒˆ ë©”ì‹œì§€ ê°ì§€:\", message.text);\n\n  try {\n    const roomRef = admin.firestore().doc(`chatRooms/${roomId}`);\n    const roomSnap = await roomRef.get();\n    if (!roomSnap.exists) return null;\n\n    const roomData = roomSnap.data();\n    const N8N_WEBHOOK_URL = process.env.N8N_CHAT_WEBHOOK_URL || functions.config().n8n?.webhook_url || \"https://n8n.yagovibe.com/webhook/chat-new-message\";\n\n    const payload = {\n      event: \"new_chat_message\",\n      roomId,\n      messageId,\n      message: { text: message.text || \"\", sender: message.sender || \"unknown\", senderName: message.senderName || \"ìµëª…\", createdAt: new Date().toISOString() },\n      room: { productId: roomData.productId || \"\", productTitle: roomData.productTitle || \"ì•Œ ìˆ˜ ì—†ìŒ\", productImage: roomData.productImage || \"\", participants: roomData.participants || [] },\n      links: { chatRoom: `https://yagovibe.com/chat/${roomId}`, product: roomData.productId ? `https://yagovibe.com/market/${roomData.productId}` : \"\" },\n      timestamp: new Date().toISOString()\n    };\n\n    const response = await fetch(N8N_WEBHOOK_URL, {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\", \"User-Agent\": \"YAGO-VIBE-Functions/1.0\" },\n      body: JSON.stringify(payload)\n    });\n\n    if (response.ok) {\n      console.log(\"âœ… n8n Webhook ì „ì†¡ ì™„ë£Œ:\", response.status);\n      await admin.firestore().collection(\"logs\").add({ event: \"n8n_webhook_success\", roomId, messageId, status: response.status, createdAt: admin.firestore.FieldValue.serverTimestamp() });\n    } else {\n      console.warn(\"âš ï¸ n8n Webhook ì‘ë‹µ ì˜¤ë¥˜:\", response.status);\n    }\n\n    return null;\n  } catch (error) { console.error(\"âŒ n8n Webhook ì „ì†¡ ì‹¤íŒ¨:\", error); return null; }\n});\n\nexports.logChatEvent = functions.firestore.document(\"chatRooms/{roomId}/messages/{messageId}\").onCreate(async (snap, context) => {\n  const message = snap.data();\n  const { roomId, messageId } = context.params;\n  try {\n    await admin.firestore().collection(\"chatEvents\").add({ type: \"message_created\", roomId, messageId, sender: message.sender || \"unknown\", textLength: message.text?.length || 0, createdAt: admin.firestore.FieldValue.serverTimestamp() });\n    console.log(\"ğŸ“Š ì±„íŒ… ì´ë²¤íŠ¸ ë¡œê¹… ì™„ë£Œ\");\n  } catch (error) { console.error(\"âŒ ë¡œê¹… ì‹¤íŒ¨:\", error); }\n  return null;\n});"
    },
    {
      "step": 5,
      "action": "update",
      "file": "functions/index.js",
      "description": "Functions export ì—…ë°ì´íŠ¸",
      "priority": "high",
      "content": "// Firebase Functions Entry Point\nimport { summarizeChat } from \"./summarizeChat.js\";\nimport { sendAdminPush } from \"./sendAdminPush.js\";\n\n// âœ… ì±„íŒ… ì•Œë¦¼ ì‹œìŠ¤í…œ\nconst chatNotifications = require(\"./lib/chatNotificationTrigger\");\n\n// âœ… n8n Webhook ì—°ë™\nconst n8nChatWebhook = require(\"./lib/n8nChatWebhook\");\n\nexport { \n  summarizeChat, \n  sendAdminPush,\n  // ì±„íŒ… ì•Œë¦¼\n  ...chatNotifications,\n  // n8n Webhook\n  ...n8nChatWebhook,\n};"
    },
    {
      "step": 6,
      "action": "create",
      "file": "src/utils/fcm.ts",
      "description": "FCM í‘¸ì‹œ ì•Œë¦¼ ìœ í‹¸ë¦¬í‹°",
      "priority": "medium",
      "content": "import { getMessaging, getToken, onMessage } from \"firebase/messaging\";\nimport { doc, setDoc, serverTimestamp } from \"firebase/firestore\";\nimport { db } from \"../lib/firebase\";\nimport { getAuth } from \"firebase/auth\";\n\nconst VAPID_KEY = import.meta.env.VITE_FIREBASE_VAPID_KEY;\n\nexport async function requestFCMToken() {\n  try {\n    const auth = getAuth();\n    const user = auth.currentUser;\n    if (!user) return null;\n\n    const permission = await Notification.requestPermission();\n    if (permission !== \"granted\") return null;\n\n    const messaging = getMessaging();\n    const token = await getToken(messaging, { vapidKey: VAPID_KEY });\n    if (!token) return null;\n\n    await setDoc(doc(db, \"users\", user.uid), { fcmToken: token, fcmTokenUpdatedAt: serverTimestamp(), notificationsEnabled: true }, { merge: true });\n    console.log(\"âœ… FCM í† í° ì €ì¥ ì™„ë£Œ\");\n    return token;\n  } catch (error) { console.error(\"âŒ FCM í† í° ìš”ì²­ ì‹¤íŒ¨:\", error); return null; }\n}\n\nexport function setupForegroundMessageListener() {\n  try {\n    const messaging = getMessaging();\n    onMessage(messaging, (payload) => {\n      console.log(\"ğŸ“© í¬ê·¸ë¼ìš´ë“œ ë©”ì‹œì§€:\", payload);\n      if (payload.notification) {\n        new Notification(payload.notification.title || \"ìƒˆ ì•Œë¦¼\", { body: payload.notification.body, icon: \"/icons/icon-192x192.png\" });\n      }\n    });\n  } catch (error) { console.error(\"âŒ ë¦¬ìŠ¤ë„ˆ ì„¤ì • ì‹¤íŒ¨:\", error); }\n}\n\nexport async function initializeFCM() {\n  try {\n    if (!('serviceWorker' in navigator) || !('Notification' in window)) return;\n    if (Notification.permission === \"granted\") await requestFCMToken();\n    setupForegroundMessageListener();\n    console.log(\"âœ… FCM ì´ˆê¸°í™” ì™„ë£Œ\");\n  } catch (error) { console.error(\"âŒ FCM ì´ˆê¸°í™” ì‹¤íŒ¨:\", error); }\n}"
    },
    {
      "step": 7,
      "action": "update",
      "file": "src/main.tsx",
      "description": "FCM ì´ˆê¸°í™” ì¶”ê°€",
      "priority": "high",
      "content_append": "\n// FCM ì´ˆê¸°í™”\nimport { initializeFCM } from \"./utils/fcm\";\n\n// PWA Service Worker ë“±ë¡ + FCM ì„œë¹„ìŠ¤ì›Œì»¤\nif ('serviceWorker' in navigator) {\n  window.addEventListener('load', async () => {\n    try {\n      await navigator.serviceWorker.register('/firebase-messaging-sw.js');\n      console.log('âœ… FCM Service Worker registered');\n      await initializeFCM();\n      if (!import.meta.env.DEV) {\n        await navigator.serviceWorker.register('/sw.js');\n        console.log('âœ… PWA Service Worker registered');\n      }\n    } catch (error) { console.warn('Service Worker registration failed:', error); }\n  });\n}"
    },
    {
      "step": 8,
      "action": "create",
      "file": "public/firebase-messaging-sw.js",
      "description": "FCM Service Worker - ë°±ê·¸ë¼ìš´ë“œ ì•Œë¦¼",
      "priority": "medium",
      "content": "importScripts('https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js');\nimportScripts('https://www.gstatic.com/firebasejs/10.7.1/firebase-messaging-compat.js');\n\nconst firebaseConfig = {\n  apiKey: \"***REMOVED***\",\n  authDomain: \"***REMOVED***\",\n  projectId: \"***REMOVED***\",\n  storageBucket: \"***REMOVED***\",\n  messagingSenderId: \"***REMOVED***\",\n  appId: \"***REMOVED***\"\n};\n\nfirebase.initializeApp(firebaseConfig);\nconst messaging = firebase.messaging();\n\nmessaging.onBackgroundMessage((payload) => {\n  console.log('[SW] ë°±ê·¸ë¼ìš´ë“œ ë©”ì‹œì§€:', payload);\n  const notificationTitle = payload.notification?.title || 'ìƒˆ ì•Œë¦¼';\n  const notificationOptions = { body: payload.notification?.body || '', icon: '/icons/icon-192x192.png', data: payload.data };\n  return self.registration.showNotification(notificationTitle, notificationOptions);\n});\n\nself.addEventListener('notificationclick', (event) => {\n  event.notification.close();\n  const clickAction = event.notification.data?.click_action || '/';\n  event.waitUntil(clients.matchAll({ type: 'window' }).then((clientList) => {\n    for (const client of clientList) {\n      if (client.url.includes(clickAction) && 'focus' in client) return client.focus();\n    }\n    if (clients.openWindow) return clients.openWindow(clickAction);\n  }));\n});"
    }
  ],
  "post_steps": [
    {
      "action": "command",
      "command": "cd functions && npm install node-fetch",
      "description": "Firebase Functions ì˜ì¡´ì„± ì„¤ì¹˜"
    },
    {
      "action": "command",
      "command": "firebase functions:config:set n8n.webhook_url=\"https://n8n.yagovibe.com/webhook/chat-new-message\"",
      "description": "n8n Webhook URL í™˜ê²½ë³€ìˆ˜ ì„¤ì •"
    },
    {
      "action": "info",
      "message": "âœ… ì½”ë“œ ìƒì„± ì™„ë£Œ! ì´ì œ ë‹¤ìŒ ë‹¨ê³„ë¥¼ ì§„í–‰í•˜ì„¸ìš”:\n\n1ï¸âƒ£ Firebase Console â†’ VAPID Key ìƒì„±\n2ï¸âƒ£ .env.localì— VITE_FIREBASE_VAPID_KEY ì¶”ê°€\n3ï¸âƒ£ firebase deploy --only functions\n4ï¸âƒ£ n8n Workflows Import (6ê°œ íŒŒì¼)\n5ï¸âƒ£ n8n Credentials ì—°ê²° (Slack/Gmail/Kakao/OpenAI)\n6ï¸âƒ£ Looker Studio ëŒ€ì‹œë³´ë“œ ìƒì„±\n\nğŸ“– ìƒì„¸ ê°€ì´ë“œ: FINAL_SYSTEM_SUMMARY.md ì°¸ì¡°"
    }
  ],
  "dependencies": {
    "firebase-functions": "^4.5.0",
    "firebase-admin": "^12.0.0",
    "node-fetch": "^2.7.0"
  },
  "environment_variables": {
    "required": [
      "VITE_FIREBASE_API_KEY",
      "VITE_FIREBASE_AUTH_DOMAIN",
      "VITE_FIREBASE_PROJECT_ID",
      "VITE_FIREBASE_STORAGE_BUCKET",
      "VITE_FIREBASE_MESSAGING_SENDER_ID",
      "VITE_FIREBASE_APP_ID",
      "VITE_FIREBASE_VAPID_KEY",
      "VITE_OPENAI_API_KEY"
    ],
    "optional": [
      "N8N_CHAT_WEBHOOK_URL",
      "GOOGLE_SHEET_ID",
      "ADMIN_EMAIL"
    ]
  },
  "manual_steps": {
    "firebase_console": [
      "VAPID Key ìƒì„± (Cloud Messaging)",
      "Firestore ê·œì¹™ ì—…ë°ì´íŠ¸"
    ],
    "n8n": [
      "Workflow 6ê°œ Import",
      "Slack OAuth2 ì—°ê²°",
      "Gmail OAuth2 ì—°ê²°",
      "Kakao OAuth2 ì—°ê²°",
      "OpenAI API Key ì…ë ¥",
      "Google Sheets ê¶Œí•œ í—ˆìš©",
      "ê° Workflow Active í† ê¸€ ON"
    ],
    "looker_studio": [
      "Google Sheets ì—°ê²°",
      "ì°¨íŠ¸ 5ê°œ ì¶”ê°€",
      "í…Œë§ˆ ì„¤ì •"
    ]
  },
  "estimated_time": {
    "cursor_auto": "5ë¶„",
    "manual_setup": "65ë¶„",
    "total": "70ë¶„"
  },
  "monthly_cost": {
    "firebase": "ë¬´ë£Œ",
    "openai": "$0.48",
    "total": "$0.48 (ì•½ 650ì›)"
  }
}

