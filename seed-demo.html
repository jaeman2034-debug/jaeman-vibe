<!DOCTYPE html>
<html>
<head>
    <title>Seed Demo Post</title>
    <script type="module">
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
        import { getFirestore, collection, addDoc } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js';

        // Firebase 설정 (실제 값으로 교체 필요)
        const firebaseConfig = {
            apiKey: "your-api-key",
            authDomain: "your-project.firebaseapp.com",
            projectId: "your-project-id",
            storageBucket: "your-project.appspot.com",
            messagingSenderId: "123456789",
            appId: "1:123456789:web:demo"
        };

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        async function seedDemoPost() {
            try {
                // 1) 데모 포스트 생성
                const ref = await addDoc(collection(db, "posts"), {
                    title: "FC88 공식 블로그 오픈 🎉",
                    content: "FC88 팀 공식 블로그가 오픈되었습니다!\n앞으로 이곳에서 팀 소식, 경기 일정, 선수 인터뷰, 훈련 후기 등을 공유할 예정입니다.\n많은 관심과 구독 부탁드립니다 🙌",
                    authorUid: "demo-admin",
                    authorName: "관리자 FC88",
                    authorIcon: "https://placehold.co/100x100?text=FC88",
                    createdAt: Date.now(),
                    updatedAt: Date.now(),
                    tags: ["공지", "FC88", "블로그오픈"],
                    likes: 0,
                    views: 0,
                });

                // 2) 댓글 샘플 추가
                const commentsCol = collection(db, "posts", ref.id, "comments");
                await addDoc(commentsCol, {
                    content: "FC88 화이팅! 앞으로 글 기대할게요 🙌",
                    authorUid: "user-001",
                    authorName: "홍길동",
                    authorIcon: "https://placehold.co/50x50?text=H",
                    createdAt: Date.now(),
                });
                await addDoc(commentsCol, {
                    content: "공식 블로그 오픈 축하드립니다 👏",
                    authorUid: "user-002",
                    authorName: "김철수",
                    authorIcon: "https://placehold.co/50x50?text=K",
                    createdAt: Date.now() + 1000,
                });

                console.log("✅ Demo post created:", ref.id);
                document.getElementById('result').innerHTML = `
                    <h2>✅ 성공!</h2>
                    <p>Demo post created: ${ref.id}</p>
                    <p>댓글 2개도 함께 생성되었습니다!</p>
                    <p><a href="http://localhost:5183/posts/${ref.id}" target="_blank">브라우저에서 확인</a></p>
                `;
            } catch (err) {
                console.error("❌ Error:", err);
                document.getElementById('result').innerHTML = `
                    <h2>❌ 오류</h2>
                    <p>데모 데이터 생성 실패: ${err.message}</p>
                `;
            }
        }

        // 페이지 로드 시 자동 실행
        window.onload = seedDemoPost;
    </script>
</head>
<body>
    <h1>Seed Demo Post</h1>
    <div id="result">실행 중...</div>
</body>
</html>
