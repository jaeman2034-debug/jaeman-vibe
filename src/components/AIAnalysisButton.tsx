import React, { useState } from 'react';import { Brain, Loader2, CheckCircle, AlertTriangle } from 'lucide-react';export type AIAnalysisResult = {  category: string;  condition: 'new' | 'good' | 'fair' | 'poor';  priceEstimate: {    low: number;    high: number;    currency: 'KRW';  };  authenticityScore: number; // 0~1  riskFlags: string[];  tags: string[];  confidence: number;  updatedAt: Date;};type Props = {  productId: string;  images: string[];  onAnalysisComplete: (result: AIAnalysisResult) => void;  className?: string;};export default function AIAnalysisButton({   productId,   images,   onAnalysisComplete,   className = '' }: Props) {  const [isAnalyzing, setIsAnalyzing] = useState(false);  const [hasAnalysis, setHasAnalysis] = useState(false);  // AI ë¶„ì„ ?¤í–‰  const runAnalysis = async () => {    if (isAnalyzing || images.length === 0) return;        setIsAnalyzing(true);        try {      // ?¤ì œ AI API ?¸ì¶œ (?ˆì‹œ)      const result = await callAIAnalysisAPI(images);            // ê²°ê³¼ ?€??ë°?ì½œë°± ?¸ì¶œ      await saveAnalysisResult(productId, result);      onAnalysisComplete(result);      setHasAnalysis(true);            // TTSë¡?ê²°ê³¼ ?½ì–´ì£¼ê¸°      speakAnalysisResult(result);          } catch (error) {      console.error('AI ë¶„ì„ ?¤íŒ¨:', error);      alert('AI ë¶„ì„???¤íŒ¨?ˆìŠµ?ˆë‹¤. ?¤ì‹œ ?œë„?´ì£¼?¸ìš”.');    } finally {      setIsAnalyzing(false);    }  };  // AI ë¶„ì„ API ?¸ì¶œ (?¤ì œ êµ¬í˜„ ?„ìš”)  const callAIAnalysisAPI = async (imageUrls: string[]): Promise<AIAnalysisResult> => {    // TODO: ?¤ì œ AI API ?°ë™    // ?ˆì‹œ ?‘ë‹µ    await new Promise(resolve => setTimeout(resolve, 2000)); // ë¡œë”© ?œë??ˆì´??        return {      category: '?¤í¬ì¸ ìš©??,      condition: 'good',      priceEstimate: {        low: 28000,        high: 35000,        currency: 'KRW'      },      authenticityScore: 0.85,      riskFlags: [],      tags: ['?¤í¬ì¸?, 'ê°€ë°?, 'ì¤‘ê³ ', '?íƒœ?‘í˜¸'],      confidence: 0.92,      updatedAt: new Date()    };  };  // ë¶„ì„ ê²°ê³¼ ?€??  const saveAnalysisResult = async (productId: string, result: AIAnalysisResult) => {    // TODO: Firestore??ë¶„ì„ ê²°ê³¼ ?€??    console.log('ë¶„ì„ ê²°ê³¼ ?€??', productId, result);  };  // TTSë¡?ê²°ê³¼ ?½ì–´ì£¼ê¸°  const speakAnalysisResult = (result: AIAnalysisResult) => {    if (!('speechSynthesis' in window)) return;        const text = `      ${result.category} ì¹´í…Œê³ ë¦¬ë¡?ë¶„ë¥˜?˜ì—ˆ?µë‹ˆ??      ?íƒœ??${getConditionText(result.condition)}?…ë‹ˆ??      ê°€ê²?ì¶”ì •ì¹˜ëŠ” ${result.priceEstimate.low.toLocaleString()}?ì—??${result.priceEstimate.high.toLocaleString()}???¬ì´?…ë‹ˆ??      ?•í’ˆ ê°€?¥ì„±?€ ${Math.round(result.authenticityScore * 100)}%?…ë‹ˆ??    `;        const utterance = new SpeechSynthesisUtterance(text);    utterance.lang = 'ko-KR';    utterance.rate = 0.9;    speechSynthesis.speak(utterance);  };  // ?íƒœ ?ìŠ¤??ë³€??  const getConditionText = (condition: string): string => {    const conditionMap = {      'new': '?ˆìƒ??,      'good': '?íƒœ?‘í˜¸',      'fair': 'ë³´í†µ',      'poor': '?íƒœë¶ˆëŸ‰'    };    return conditionMap[condition as keyof typeof conditionMap] || condition;  };  return (    <button      onClick={runAnalysis}      disabled={isAnalyzing || images.length === 0}      className={`        flex items-center gap-2 px-3 py-2 rounded-lg text-sm font-medium        transition-all duration-200 disabled:opacity-50        ${hasAnalysis           ? 'bg-green-100 text-green-700 border border-green-200'           : 'bg-blue-100 text-blue-700 border border-blue-200 hover:bg-blue-200'        }        ${className}      `}      aria-label={hasAnalysis ? 'AI ë¶„ì„ ?„ë£Œ' : 'AI ë¶„ì„ ?¤í–‰'}    >      {isAnalyzing ? (        <>          <Loader2 className="w-4 h-4 animate-spin" />          <span>ë¶„ì„ ì¤?..</span>        </>      ) : hasAnalysis ? (        <>          <CheckCircle className="w-4 h-4" />          <span>AI ë¶„ì„ ?„ë£Œ</span>        </>      ) : (        <>          <Brain className="w-4 h-4" />          <span>AI ë¶„ì„</span>        </>      )}    </button>  );}