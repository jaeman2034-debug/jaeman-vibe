// src/components/AuthErrorHandler.tsx// Firebase ?¸ì¦ ?¤ë¥˜ ì²˜ë¦¬ ë°??¬ìš©???ˆë‚´ ì»´í¬?ŒíŠ¸import { useState } from 'react';import {   signInWithEmail,   registerWithEmail,   formatAuthErrorForUser,  logAuthError } from '../features/auth/authService';// ?¬ëŒì¹œí™”?ì¸ ?¸ì¦ ?¤ë¥˜ ë©”ì‹œì§€ ë§¤í•‘const AUTH_MSG: Record<string, string> = {  'auth/user-not-found': 'ê°€?…ë˜ì§€ ?Šì? ?´ë©”?¼ì…?ˆë‹¤.',  'auth/wrong-password': 'ë¹„ë?ë²ˆí˜¸ê°€ ?¬ë°”ë¥´ì? ?ŠìŠµ?ˆë‹¤.',  'auth/invalid-credential': '?´ë©”???ëŠ” ë¹„ë?ë²ˆí˜¸ê°€ ?¬ë°”ë¥´ì? ?ŠìŠµ?ˆë‹¤.',  'auth/too-many-requests': '?”ì²­??ë§ìŠµ?ˆë‹¤. ? ì‹œ ???¤ì‹œ ?œë„?˜ì„¸??',  'auth/network-request-failed': '?¤íŠ¸?Œí¬ ?¤ë¥˜?…ë‹ˆ?? ?¸í„°???°ê²°???•ì¸?´ì£¼?¸ìš”.',  'auth/invalid-email': '?¬ë°”ë¥??´ë©”???•ì‹???„ë‹™?ˆë‹¤.',  'auth/email-already-in-use': '?´ë? ?¬ìš© ì¤‘ì¸ ?´ë©”?¼ì…?ˆë‹¤.',  'auth/weak-password': 'ë¹„ë?ë²ˆí˜¸ê°€ ?ˆë¬´ ?½í•©?ˆë‹¤. 8???´ìƒ?¼ë¡œ ?¤ì •?´ì£¼?¸ìš”.',  default: '?¸ì¦???¤íŒ¨?ˆìŠµ?ˆë‹¤. ? ì‹œ ???¤ì‹œ ?œë„?˜ì„¸??',};function humanize(code?: string) {  return (code && AUTH_MSG[code]) || `${AUTH_MSG.default}${code ? ` (${code})` : ''}`;}export default function AuthErrorHandler() {  const [email, setEmail] = useState('');  const [password, setPassword] = useState('');  const [isLogin, setIsLogin] = useState(true);  const [error, setError] = useState<string>('');  const [solution, setSolution] = useState<string>('');  const [severity, setSeverity] = useState<'info' | 'warning' | 'error'>('info');  const [isLoading, setIsLoading] = useState(false);  const [success, setSuccess] = useState<string>('');  const handleSubmit = async (e: React.FormEvent) => {    e.preventDefault();    setIsLoading(true);    setError('');    setSolution('');    setSuccess('');    try {      if (isLogin) {        await signInWithEmail(email, password);        setSuccess('ë¡œê·¸?¸ì— ?±ê³µ?ˆìŠµ?ˆë‹¤!');      } else {        await registerWithEmail(email, password);        setSuccess('?Œì›ê°€?…ì— ?±ê³µ?ˆìŠµ?ˆë‹¤!');      }    } catch (error) {      console.error('[AUTH] Operation failed:', error);            // ?ì„¸???¤ë¥˜ ë¡œê¹…      logAuthError(isLogin ? 'Email Login' : 'Email Registration', error, {         email,         isLogin,        timestamp: new Date().toISOString()       });      // ?¬ìš©??ì¹œí™”???¤ë¥˜ ë©”ì‹œì§€ ?ì„±      const userError = formatAuthErrorForUser(error);      setError(userError.message);      setSolution(userError.solution);      setSeverity(userError.severity);    } finally {      setIsLoading(false);    }  };  const getErrorStyle = (severity: 'info' | 'warning' | 'error') => {    switch (severity) {      case 'info':        return {           background: '#dbeafe',           color: '#1e40af',           border: '1px solid #93c5fd',          padding: '12px',          borderRadius: '8px',          marginBottom: '16px'        };      case 'warning':        return {           background: '#fef3c7',           color: '#92400e',           border: '1px solid #fbbf24',          padding: '12px',          borderRadius: '8px',          marginBottom: '16px'        };      case 'error':        return {           background: '#fee2e2',           color: '#991b1b',           border: '1px solid #f87171',          padding: '12px',          borderRadius: '8px',          marginBottom: '16px'        };      default:        return {           background: '#f3f4f6',           color: '#374151',           border: '1px solid #d1d5db',          padding: '12px',          borderRadius: '8px',          marginBottom: '16px'        };    }  };  const getSuccessStyle = () => ({    background: '#dcfce7',    color: '#166534',    border: '1px solid #86efac',    padding: '12px',    borderRadius: '8px',    marginBottom: '16px'  });  return (    <div style={{      maxWidth: '400px',      margin: '0 auto',      padding: '20px',      border: '1px solid #e5e7eb',      borderRadius: '12px',      background: '#fff'    }}>      <h2 style={{ textAlign: 'center', marginBottom: '24px', color: '#374151' }}>        {isLogin ? '?” ë¡œê·¸?? : '?“ ?Œì›ê°€??}      </h2>      {/* ?±ê³µ ë©”ì‹œì§€ */}      {success && (        <div style={getSuccessStyle()}>          ??{success}        </div>      )}      {/* ?¤ë¥˜ ë©”ì‹œì§€ */}      {error && (        <div style={getErrorStyle(severity)}>          <div style={{ fontWeight: 'bold', marginBottom: '8px' }}>            {severity === 'info' && '?¹ï¸ ?•ë³´'}            {severity === 'warning' && '? ï¸ ì£¼ì˜'}            {severity === 'error' && '???¤ë¥˜'}            {' '}{error}          </div>          {solution && (            <div style={{ fontSize: '14px', opacity: 0.8 }}>              ?’¡ {solution}            </div>          )}        </div>      )}      <form onSubmit={handleSubmit}>        <div style={{ marginBottom: '16px' }}>          <label style={{ display: 'block', marginBottom: '8px', fontWeight: '500' }}>            ?´ë©”??          </label>          <input            type="email"            value={email}            onChange={(e) => setEmail(e.target.value)}            placeholder="user@example.com"            required            style={{              width: '100%',              padding: '12px',              border: '1px solid #d1d5db',              borderRadius: '8px',              fontSize: '16px'            }}          />        </div>        <div style={{ marginBottom: '20px' }}>          <label style={{ display: 'block', marginBottom: '8px', fontWeight: '500' }}>            ë¹„ë?ë²ˆí˜¸          </label>          <input            type="password"            value={password}            onChange={(e) => setPassword(e.target.value)}            placeholder="8???´ìƒ ?…ë ¥"            required            minLength={8}            style={{              width: '100%',              padding: '12px',              border: '1px solid #d1d5db',              borderRadius: '8px',              fontSize: '16px'            }}          />        </div>        <button          type="submit"          disabled={isLoading}          style={{            width: '100%',            padding: '14px',            background: isLoading ? '#9ca3af' : '#3b82f6',            color: 'white',            border: 'none',            borderRadius: '8px',            fontSize: '16px',            fontWeight: '600',            cursor: isLoading ? 'not-allowed' : 'pointer',            marginBottom: '16px'          }}        >          {isLoading ? 'ì²˜ë¦¬ ì¤?..' : (isLogin ? 'ë¡œê·¸?? : '?Œì›ê°€??)}        </button>      </form>      {/* ëª¨ë“œ ?„í™˜ */}      <div style={{ textAlign: 'center' }}>        <button          type="button"          onClick={() => {            setIsLogin(!isLogin);            setError('');            setSolution('');            setSuccess('');          }}          style={{            background: 'none',            border: 'none',            color: '#3b82f6',            cursor: 'pointer',            textDecoration: 'underline',            fontSize: '14px'          }}        >          {isLogin ? 'ê³„ì •???†ìœ¼? ê??? ?Œì›ê°€?? : '?´ë? ê³„ì •???ˆìœ¼? ê??? ë¡œê·¸??}        </button>      </div>      {/* ?”ë²„ê¹??•ë³´ */}      <details style={{ marginTop: '20px', fontSize: '12px', color: '#6b7280' }}>        <summary style={{ cursor: 'pointer' }}>?” ?”ë²„ê¹??•ë³´</summary>        <div style={{ marginTop: '8px', padding: '8px', background: '#f3f4f6', borderRadius: '4px' }}>          <div>?´ë©”?? {email || '(?…ë ¥?˜ì? ?ŠìŒ)'}</div>          <div>ë¹„ë?ë²ˆí˜¸ ê¸¸ì´: {password?.length || 0}</div>          <div>ëª¨ë“œ: {isLogin ? 'ë¡œê·¸?? : '?Œì›ê°€??}</div>          <div>ë¡œë”© ?íƒœ: {isLoading ? '?? : '?„ë‹ˆ??}</div>          <div>?¤ë¥˜ ?íƒœ: {error ? '?? : '?„ë‹ˆ??}</div>        </div>      </details>    </div>  );} 