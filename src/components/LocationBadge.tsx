import React, { useState, useEffect } from 'react';import { reverseGeocodeDong, distanceMeters, formatDistanceKm } from '@/lib/geo';interface LocationBadgeProps {  my?: { lat: number; lng: number } | null;  item: { lat: number; lng: number; placeName?: string };}export default function LocationBadge({ my, item }: LocationBadgeProps) {  const [address, setAddress] = useState<string>('');  const [loading, setLoading] = useState(true);  useEffect(() => {    const loadAddress = async () => {      try {        setLoading(true);        const adminAddress = await reverseGeocodeDong(item.lat, item.lng);        setAddress(adminAddress.full);      } catch (error) {        console.error('ì£¼ì†Œ ë³€???¤íŒ¨:', error);        setAddress('?„ì¹˜ ?•ë³´ ?†ìŒ');      } finally {        setLoading(false);      }    };    if (item.lat && item.lng) {      loadAddress();    } else {      setAddress('?„ì¹˜ ?•ë³´ ?†ìŒ');      setLoading(false);    }  }, [item.lat, item.lng]);  // ê±°ë¦¬ ê³„ì‚°  const distance = my ? distanceMeters(my, item) : null;  const distanceText = distance ? formatDistanceKm(distance) : null;  // ì¹´ì¹´?¤ë§µ ë§í¬  const mapUrl = `https://map.kakao.com/link/map/${encodeURIComponent(address)},${item.lat},${item.lng}`;  if (loading) {    return (      <div className="inline-flex items-center gap-1 text-xs rounded-full px-2 py-1 bg-gray-100 text-gray-700">        ?“ ?„ì¹˜ ?•ë³´ ë¡œë”© ì¤?..      </div>    );  }  return (    <a       href={mapUrl}       target="_blank"       rel="noreferrer"      className="inline-flex items-center gap-1 text-xs rounded-full px-2 py-1 bg-gray-100 text-gray-700 hover:bg-gray-200 transition-colors"    >      ?“ {address} {distanceText && `Â· ${distanceText}`}    </a>  );}
