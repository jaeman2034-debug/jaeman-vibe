import React, { useState } from 'react';import { auth } from '@/lib/firebase';import { submitReview } from '@/services/reviewService';interface ReviewFormProps {  threadId: string;  targetId: string;  onReviewSubmitted?: () => void;  onCancel?: () => void;}export default function ReviewForm({ threadId, targetId, onReviewSubmitted, onCancel }: ReviewFormProps) {  const [stars, setStars] = useState(5);  const [selectedTags, setSelectedTags] = useState<string[]>([]);  const [loading, setLoading] = useState(false);  // ê°„ë‹¨???œê·¸ ?µì…˜  const availableTags = ['ì¹œì ˆ', '?œê°„?½ì†', 'ê¹”ë”??, '?•ì§??, 'ë¹ ë¥¸?‘ë‹µ', 'ë¶ˆì¹œ??, 'ì§€ê°?, 'ì§€?€ë¶„í•¨', 'ê±°ì§“ë§?, '?ë¦°?‘ë‹µ'];  const handleTagToggle = (tag: string) => {    setSelectedTags(prev =>       prev.includes(tag)         ? prev.filter(t => t !== tag)        : [...prev, tag]    );  };  const handleSubmit = async (e: React.FormEvent) => {    e.preventDefault();        if (selectedTags.length === 0) {      alert('ìµœì†Œ 1ê°??´ìƒ???œê·¸ë¥?? íƒ?´ì£¼?¸ìš”.');      return;    }    try {      setLoading(true);            await submitReview(threadId, targetId, stars, selectedTags);      alert('?„ê¸°ê°€ ?‘ì„±?˜ì—ˆ?µë‹ˆ??');      onReviewSubmitted?.();    } catch (error: any) {      console.error('?„ê¸° ?‘ì„± ?¤íŒ¨:', error);      alert(error.message || '?„ê¸° ?‘ì„±???¤íŒ¨?ˆìŠµ?ˆë‹¤.');    } finally {      setLoading(false);    }  };  return (    <div className="bg-white border rounded-lg p-4 shadow-sm">      <h3 className="text-lg font-semibold mb-4">ê±°ë˜ ?„ê¸° ?‘ì„±</h3>            <form onSubmit={handleSubmit} className="space-y-4">        {/* ë³„ì  ? íƒ */}        <div>          <label className="block text-sm font-medium text-gray-700 mb-2">            ë³„ì           </label>          <div className="flex gap-2">            {[1, 2, 3, 4, 5].map(star => (              <button                key={star}                type="button"                onClick={() => setStars(star)}                className={`text-2xl ${                  star <= stars ? 'text-yellow-400' : 'text-gray-300'                } hover:text-yellow-400 transition-colors`}              >                ??              </button>            ))}          </div>          <p className="text-sm text-gray-500 mt-1">            {stars}?ì„ ? íƒ?ˆìŠµ?ˆë‹¤          </p>        </div>        {/* ?œê·¸ ? íƒ */}        <div>          <label className="block text-sm font-medium text-gray-700 mb-2">            ?œê·¸ ? íƒ (ìµœì†Œ 1ê°?          </label>          <div className="grid grid-cols-2 gap-2">            {availableTags.map(tag => (              <button                key={tag}                type="button"                onClick={() => handleTagToggle(tag)}                className={`px-3 py-2 text-sm border rounded-lg transition-colors ${                  selectedTags.includes(tag)                    ? 'bg-blue-500 text-white border-blue-500'                    : 'bg-white text-gray-700 border-gray-300 hover:bg-gray-50'                }`}              >                {tag}              </button>            ))}          </div>        </div>        {/* ë²„íŠ¼ */}        <div className="flex gap-2 pt-2">          <button            type="submit"            disabled={loading || selectedTags.length === 0}            className="flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors"          >            {loading ? '?œì¶œ ì¤?..' : '?„ê¸° ?œì¶œ'}          </button>          {onCancel && (            <button              type="button"              onClick={onCancel}              className="px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors"            >              ì·¨ì†Œ            </button>          )}        </div>      </form>    </div>  );}
