import React, { useEffect, useState } from "react";import { useSettings } from "../settings/SettingsContext";import "./settings.css";const VOICES_FALLBACK = [{ name: "?ë™ ? íƒ", value: "auto" }];export default function SettingsSheet() {  const { locale, setLocale, autoFillWhileListening, setAutoFillWhileListening } = useSettings();  const [open, setOpen] = useState(false);  const [voices, setVoices] = useState<{ name: string; value: string }[]>(VOICES_FALLBACK);  useEffect(() => {    if (!("speechSynthesis" in window)) return;    const load = () => {      const list = window.speechSynthesis.getVoices();      const items = [{ name: "?ë™ ? íƒ", value: "auto" }].concat(        list.map(v => ({ name: `${v.name} (${v.lang})`, value: v.name }))      );      setVoices(items);    };    load();    const id = setInterval(load, 300);    setTimeout(() => clearInterval(id), 1500);  }, []);  return (    <>      {/* ê³ ì •???¤ì • ë²„íŠ¼ */}      <button className="gear-btn" onClick={() => setOpen(true)} aria-label="?¤ì • ?´ê¸°">??/button>      {open && (        <div className="sheet-backdrop" onClick={() => setOpen(false)}>          <div className="sheet" onClick={e => e.stopPropagation()}>            <div className="sheet-header">              <h3>?¤ì •</h3>              <button className="icon" onClick={() => setOpen(false)}>??/button>            </div>            <div className="sheet-group">              <h4>?¸ë™</h4>              <label className="row">                <input                  type="checkbox"                  checked={false}                  onChange={() => {}}                />                <span>?Œì„± ëª…ë ¹ ?¬ìš©</span>              </label>              <label className="row">                <input                  type="checkbox"                  checked={false}                  onChange={() => {}}                />                <span>?ìŠ¤??ëª…ë ¹ ?¬ìš©</span>              </label>              <label className="row">                <input                  type="checkbox"                  checked={false}                  onChange={() => {}}                />                <span>??ì§„ì… ???ë™ ?œì‘</span>              </label>            </div>            <div className="sheet-group">              <h4>?Œì„± ?¸ì‹</h4>              <label className="row">                <input                  type="checkbox"                  checked={settings.autoFillWhileListening}                  onChange={e => update("autoFillWhileListening", e.target.checked)}                />                <span>?£ëŠ” ì¤??ë™ ì±„ì? (ê¶Œì¥: ?„ê¸°)</span>              </label>              <p className="hint">?„ë©´ "?Œì‹±?˜ê¸°" ë²„íŠ¼???ŒëŸ¬???¼ì´ ì±„ì›Œì§‘ë‹ˆ??</p>            </div>            <div className="sheet-group">              <h4>?¸ì–´/?Œì„±</h4>              <label className="row">                <span>?¸ì‹ ?¸ì–´</span>                <select                  value={locale}                  onChange={e => setLocale(e.target.value)}                >                  <option value="ko-KR">?œêµ­??(ko-KR)</option>                  <option value="en-US">English (en-US)</option>                  <option value="ja-JP">?¥æœ¬èª?(ja-JP)</option>                </select>              </label>              <label className="row">                <span>TTS ?Œì„±</span>                <select                  value="auto"                  onChange={() => {}}                >                  {voices.map(v => (                    <option key={v.name + v.value} value={v.value}>{v.name}</option>                  ))}                </select>              </label>            </div>            <div className="sheet-group">              <h4>NLU (OpenAI)</h4>              <label className="row">                <span>ëª¨ë¸</span>                <select                  value="gpt-4o-mini"                  onChange={() => {}}                >                  <option value="gpt-4o-mini">gpt-4o-mini (ê¶Œì¥/?€ë¹„ìš©)</option>                  <option value="gpt-4o">gpt-4o</option>                  <option value="gpt-3.5">gpt-3.5</option>                </select>              </label>              <label className="row">                <span>Temperature</span>                <input                  type="range"                  min={0}                  max={1}                  step={0.05}                  value={0.4}                  onChange={() => {}}                />                <span className="mono">0.40</span>              </label>              <p className="hint">API Key??.env??<code>VITE_OPENAI_API_KEY</code> ë¥??¬ìš©?©ë‹ˆ??</p>            </div>            <div className="sheet-footer">              <button className="ghost" onClick={() => setOpen(false)}>?«ê¸°</button>            </div>          </div>        </div>      )}    </>  );}