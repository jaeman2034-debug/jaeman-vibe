import React, { useState, useEffect, useCallback, useRef } from 'react';import type { SearchResult, MarketItem, Location } from '../../features/market/types';import { searchItemsByLocation, calculateLocationScore } from '../../services/locationService';interface AISearchRecommendProps {  userLocation?: Location;  onItemSelect: (itemId: string) => void;  onClose: () => void;}type SearchType = 'text' | 'image' | 'voice' | 'semantic';export default function AISearchRecommend({ userLocation, onItemSelect, onClose }: AISearchRecommendProps) {  const [searchQuery, setSearchQuery] = useState('');  const [searchType, setSearchType] = useState<SearchType>('text');  const [results, setResults] = useState<SearchResult[]>([]);  const [isSearching, setIsSearching] = useState(false);  const [error, setError] = useState<string | null>(null);  const [filters, setFilters] = useState({    category: '',    priceRange: { min: 0, max: 1000000 },    condition: '',    radiusKm: userLocation ? 10 : 50  });  const [sortBy, setSortBy] = useState<'relevance' | 'distance' | 'price' | 'freshness'>('relevance');  const [searchHistory, setSearchHistory] = useState<string[]>([]);  const [showAdvancedFilters, setShowAdvancedFilters] = useState(false);    const fileInputRef = useRef<HTMLInputElement>(null);  const voiceRecognitionRef = useRef<any>(null);  // ê²€???¤í–‰  const performSearch = useCallback(async () => {    if (!searchQuery.trim() && searchType === 'text') return;    setIsSearching(true);    setError(null);    try {      let searchResults: SearchResult[] = [];      switch (searchType) {        case 'text':          searchResults = await performTextSearch(searchQuery, filters);          break;        case 'image':          searchResults = await performImageSearch(searchQuery, filters);          break;        case 'voice':          searchResults = await performVoiceSearch(searchQuery, filters);          break;        case 'semantic':          searchResults = await performSemanticSearch(searchQuery, filters);          break;      }      // ê°€ì¤‘ì¹˜ ê¸°ë°˜ ??‚¹ ?ìš©      const rankedResults = applyWeightedRanking(searchResults, userLocation);      setResults(rankedResults);      // ê²€???ˆìŠ¤? ë¦¬??ì¶”ê?      if (searchQuery.trim()) {        setSearchHistory(prev => {          const newHistory = [searchQuery, ...prev.filter(h => h !== searchQuery)].slice(0, 10);          return newHistory;        });      }    } catch (err: any) {      console.error('ê²€???¤íŒ¨:', err);      setError('ê²€??ì¤??¤ë¥˜ê°€ ë°œìƒ?ˆìŠµ?ˆë‹¤. ?¤ì‹œ ?œë„?´ì£¼?¸ìš”.');    } finally {      setIsSearching(false);    }  }, [searchQuery, searchType, filters, userLocation]);  // ?ìŠ¤??ê²€??(Algolia/Meilisearch ?œë??ˆì´??  const performTextSearch = async (query: string, filters: any): Promise<SearchResult[]> => {    // ?¤ì œë¡œëŠ” Algolia/Meilisearch API ?¸ì¶œ    // ?¬ê¸°?œëŠ” Firestore ê¸°ë°˜ ?œë??ˆì´??        const mockResults: SearchResult[] = [      {        id: '1',        title: 'NIKE ë¨¸íë¦¬ì–¼ ë² ì´??13 ?˜ë¦¬??,        description: '?„ë¡œ ? ìˆ˜?¤ì´ ?¬ìš©?˜ëŠ” ?„ë¦¬ë¯¸ì—„ ì¶•êµ¬??,        price: 150000,        category: 'ì¶•êµ¬??,        region: '?œìš¸',        distance: userLocation ? 2.5 : undefined,        relevance: 0.95,        imageUrl: '/mock-soccer-shoe.jpg',        ai: { quality_score: 0.88, confidence: 0.92 }      },      {        id: '2',        title: 'Adidas ?„ë ˆ?°í„° FG ì¶•êµ¬??,        description: '?°ì–´???‘ì??¥ê³¼ ì»¨íŠ¸ë¡?,        price: 120000,        category: 'ì¶•êµ¬??,        region: '?œìš¸',        distance: userLocation ? 1.8 : undefined,        relevance: 0.87,        imageUrl: '/mock-adidas-shoe.jpg',        ai: { quality_score: 0.82, confidence: 0.89 }      }    ];    // ?„í„°ë§??ìš©    return mockResults.filter(item => {      if (filters.category && item.category !== filters.category) return false;      if (item.price < filters.priceRange.min || item.price > filters.priceRange.max) return false;      if (filters.condition && item.ai?.quality_score) {        const condition = item.ai.quality_score > 0.8 ? 'A' : item.ai.quality_score > 0.6 ? 'B' : 'C';        if (condition !== filters.condition) return false;      }      return true;    });  };  // ?´ë?ì§€ ê²€??(CLIP/OpenAI Vision ?œë??ˆì´??  const performImageSearch = async (query: string, filters: any): Promise<SearchResult[]> => {    // ?¤ì œë¡œëŠ” ?´ë?ì§€ ?„ë² ???ì„± ??ë²¡í„° DB ê²€??    // ?¬ê¸°?œëŠ” ?œë??ˆì´??        const mockResults: SearchResult[] = [      {        id: '3',        title: '? ì‚¬??ì¶•êµ¬???´ë?ì§€ ê²€??ê²°ê³¼',        description: '?…ë¡œ?œí•œ ?´ë?ì§€?€ ? ì‚¬???í’ˆ',        price: 180000,        category: 'ì¶•êµ¬??,        region: 'ë¶€??,        distance: userLocation ? 320 : undefined,        relevance: 0.78,        imageUrl: '/mock-similar-shoe.jpg',        ai: { quality_score: 0.75, confidence: 0.81 }      }    ];    return mockResults;  };  // ?Œì„± ê²€??(Web Speech API ?œë??ˆì´??  const performVoiceSearch = async (query: string, filters: any): Promise<SearchResult[]> => {    // ?¤ì œë¡œëŠ” Web Speech API ?¬ìš©    // ?¬ê¸°?œëŠ” ?œë??ˆì´??        const mockResults: SearchResult[] = [      {        id: '4',        title: '?Œì„± ê²€??ê²°ê³¼: ì¶•êµ¬??,        description: '?Œì„±?¼ë¡œ ê²€?‰í•œ ì¶•êµ¬???í’ˆ',        price: 95000,        category: 'ì¶•êµ¬??,        region: '?¸ì²œ',        distance: userLocation ? 45 : undefined,        relevance: 0.72,        imageUrl: '/mock-voice-result.jpg',        ai: { quality_score: 0.68, confidence: 0.75 }      }    ];    return mockResults;  };  // ?˜ë? ê²€??(?„ë² ??ê¸°ë°˜ ?œë??ˆì´??  const performSemanticSearch = async (query: string, filters: any): Promise<SearchResult[]> => {    // ?¤ì œë¡œëŠ” OpenAI/Vertex AI ?„ë² ???ì„± ??Pinecone/Weaviate ê²€??    // ?¬ê¸°?œëŠ” ?œë??ˆì´??        const mockResults: SearchResult[] = [      {        id: '5',        title: '?˜ë???? ì‚¬??ê¸°ë°˜ ê²€??ê²°ê³¼',        description: '?„ë² ??ë²¡í„° ? ì‚¬?„ë¡œ ì°¾ì? ?í’ˆ',        price: 135000,        category: 'ì¶•êµ¬??,        region: '?€êµ?,        distance: userLocation ? 280 : undefined,        relevance: 0.91,        imageUrl: '/mock-semantic-result.jpg',        ai: { quality_score: 0.85, confidence: 0.88 }      }    ];    return mockResults;  };  // ê°€ì¤‘ì¹˜ ê¸°ë°˜ ??‚¹ ?ìš©  const applyWeightedRanking = (results: SearchResult[], userLocation?: Location): (SearchResult & { finalScore: number })[] => {    return results.map(item => {      let finalScore = 0;            // Relevance ê°€ì¤‘ì¹˜ (60%)      finalScore += (item.relevance || 0) * 0.6;            // Distance ê°€ì¤‘ì¹˜ (20%) - ?¬ìš©???„ì¹˜ê°€ ?ˆì„ ?Œë§Œ      if (userLocation && item.distance !== undefined) {        const distanceScore = Math.max(0, 1 - (item.distance / 50)); // 50km ê¸°ì? ?•ê·œ??        finalScore += distanceScore * 0.2;      }            // Freshness ê°€ì¤‘ì¹˜ (20%) - ìµœì‹  ?í’ˆ ?°ì„       const freshnessScore = 0.8; // ?¤ì œë¡œëŠ” createdAt ê¸°ë°˜ ê³„ì‚°      finalScore += freshnessScore * 0.2;            return { ...item, finalScore };    }).sort((a, b) => b.finalScore - a.finalScore);  };  // ?´ë?ì§€ ?…ë¡œ??ì²˜ë¦¬  const handleImageUpload = (event: React.ChangeEvent<HTMLInputElement>) => {    const file = event.target.files?.[0];    if (file) {      setSearchType('image');      setSearchQuery(`?´ë?ì§€ ê²€?? ${file.name}`);      // ?¤ì œë¡œëŠ” ?´ë?ì§€ ?„ë² ???ì„± ??ê²€??    }  };  // ?Œì„± ê²€???œì‘  const startVoiceSearch = () => {    if ('webkitSpeechRecognition' in window || 'SpeechRecognition' in window) {      const SpeechRecognition = (window as any).webkitSpeechRecognition || (window as any).SpeechRecognition;      voiceRecognitionRef.current = new SpeechRecognition();            voiceRecognitionRef.current.continuous = false;      voiceRecognitionRef.current.interimResults = false;      voiceRecognitionRef.current.lang = 'ko-KR';            voiceRecognitionRef.current.onstart = () => {        setSearchType('voice');        setIsSearching(true);      };            voiceRecognitionRef.current.onresult = (event: any) => {        const transcript = event.results[0][0].transcript;        setSearchQuery(transcript);        voiceRecognitionRef.current.stop();      };            voiceRecognitionRef.current.onerror = () => {        setIsSearching(false);        setError('?Œì„± ?¸ì‹???¤íŒ¨?ˆìŠµ?ˆë‹¤.');      };            voiceRecognitionRef.current.onend = () => {        setIsSearching(false);        if (searchQuery.trim()) {          performSearch();        }      };            voiceRecognitionRef.current.start();    } else {      setError('??ë¸Œë¼?°ì????Œì„± ?¸ì‹??ì§€?í•˜ì§€ ?ŠìŠµ?ˆë‹¤.');    }  };  // ?Œì„± ê²€??ì¤‘ì?  const stopVoiceSearch = () => {    if (voiceRecognitionRef.current) {      voiceRecognitionRef.current.stop();    }  };  // ê²€???ˆìŠ¤? ë¦¬ ?´ë¦­  const handleHistoryClick = (historyItem: string) => {    setSearchQuery(historyItem);    setSearchType('text');  };  // ê²€???¤í–‰ (?”ë°”?´ìŠ¤)  useEffect(() => {    const timer = setTimeout(() => {      if (searchQuery.trim() && searchType === 'text') {        performSearch();      }    }, 500);    return () => clearTimeout(timer);  }, [searchQuery, searchType, performSearch]);  // ?•ë ¬ ë³€ê²???ê²°ê³¼ ?¬ì •??  useEffect(() => {    if (results.length > 0) {      const sortedResults = [...results];      switch (sortBy) {        case 'relevance':          sortedResults.sort((a, b) => (b.relevance || 0) - (a.relevance || 0));          break;        case 'distance':          sortedResults.sort((a, b) => (a.distance || 0) - (b.distance || 0));          break;        case 'price':          sortedResults.sort((a, b) => a.price - b.price);          break;        case 'freshness':          // ?¤ì œë¡œëŠ” createdAt ê¸°ë°˜ ?•ë ¬          break;      }      setResults(sortedResults);    }  }, [sortBy]);  return (    <div className="fixed inset-0 bg-black bg-opacity-75 z-50 flex items-center justify-center">      <div className="bg-white rounded-lg max-w-6xl w-full mx-4 max-h-[90vh] overflow-y-auto">        {/* ?¤ë” */}        <div className="bg-gradient-to-r from-purple-600 to-blue-600 text-white p-4 rounded-t-lg">          <div className="flex justify-between items-center">            <h2 className="text-xl font-semibold">?” AI ê²€??& ì¶”ì²œ</h2>            <button onClick={onClose} className="text-white text-xl hover:text-purple-100">              ??            </button>          </div>          <p className="text-purple-100 text-sm mt-1">            ?ìŠ¤?? ?´ë?ì§€, ?Œì„±, ?˜ë? ê²€?‰ìœ¼ë¡??í•˜???í’ˆ??ì°¾ì•„ë³´ì„¸??          </p>        </div>        <div className="p-6">          {/* ê²€???€??? íƒ */}          <div className="mb-6">            <div className="flex space-x-2 mb-4">              {(['text', 'image', 'voice', 'semantic'] as SearchType[]).map((type) => (                <button                  key={type}                  onClick={() => setSearchType(type)}                  className={`px-4 py-2 rounded-lg font-medium transition ${                    searchType === type                      ? 'bg-purple-600 text-white'                      : 'bg-gray-100 text-gray-700 hover:bg-gray-200'                  }`}                >                  {type === 'text' && '?“ ?ìŠ¤??}                  {type === 'image' && '?–¼ï¸??´ë?ì§€'}                  {type === 'voice' && '?¤ ?Œì„±'}                  {type === 'semantic' && '?§  ?˜ë?'}                </button>              ))}            </div>          </div>          {/* ê²€???…ë ¥ */}          <div className="mb-6">            {searchType === 'text' && (              <div className="relative">                <input                  type="text"                  value={searchQuery}                  onChange={(e) => setSearchQuery(e.target.value)}                  placeholder="?í’ˆëª? ë¸Œëœ?? ?¹ì§• ?±ì„ ?…ë ¥?˜ì„¸??.."                  className="w-full p-4 pr-12 border border-gray-300 rounded-lg text-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"                />                <button                  onClick={performSearch}                  disabled={!searchQuery.trim() || isSearching}                  className="absolute right-2 top-2 bg-purple-600 text-white p-2 rounded-lg hover:bg-purple-700 disabled:opacity-50"                >                  ?”                </button>              </div>            )}            {searchType === 'image' && (              <div className="text-center p-8 border-2 border-dashed border-gray-300 rounded-lg">                <input                  ref={fileInputRef}                  type="file"                  accept="image/*"                  onChange={handleImageUpload}                  className="hidden"                />                <button                  onClick={() => fileInputRef.current?.click()}                  className="bg-purple-600 text-white px-6 py-3 rounded-lg hover:bg-purple-700"                >                  ?–¼ï¸??´ë?ì§€ ?…ë¡œ??                </button>                <p className="text-gray-600 mt-2">?´ë?ì§€ë¡?? ì‚¬???í’ˆ??ì°¾ì•„ë³´ì„¸??/p>              </div>            )}            {searchType === 'voice' && (              <div className="text-center p-8 border-2 border-dashed border-gray-300 rounded-lg">                {!isSearching ? (                  <button                    onClick={startVoiceSearch}                    className="bg-purple-600 text-white px-6 py-3 rounded-lg hover:bg-purple-700"                  >                    ?¤ ?Œì„± ê²€???œì‘                  </button>                ) : (                  <div className="space-y-4">                    <div className="w-16 h-16 border-4 border-purple-200 border-t-purple-600 rounded-full animate-spin mx-auto"></div>                    <p className="text-gray-600">?Œì„±???¸ì‹?˜ê³  ?ˆìŠµ?ˆë‹¤...</p>                    <button                      onClick={stopVoiceSearch}                      className="bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700"                    >                      ì¤‘ì?                    </button>                  </div>                )}                <p className="text-gray-600 mt-2">?Œì„±?¼ë¡œ ê²€?‰ì–´ë¥?ë§í•´ì£¼ì„¸??/p>              </div>            )}            {searchType === 'semantic' && (              <div className="relative">                <input                  type="text"                  value={searchQuery}                  onChange={(e) => setSearchQuery(e.target.value)}                  placeholder="?˜ë??ìœ¼ë¡?? ì‚¬???í’ˆ??ì°¾ì•„ë³´ì„¸??.."                  className="w-full p-4 pr-12 border border-gray-300 rounded-lg text-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"                />                <button                  onClick={performSearch}                  disabled={!searchQuery.trim() || isSearching}                  className="absolute right-2 top-2 bg-purple-600 text-white p-2 rounded-lg hover:bg-purple-700 disabled:opacity-50"                >                  ?§                 </button>              </div>            )}          </div>          {/* ê²€???ˆìŠ¤? ë¦¬ */}          {searchHistory.length > 0 && (            <div className="mb-6">              <h3 className="text-sm font-medium text-gray-700 mb-2">ìµœê·¼ ê²€?‰ì–´</h3>              <div className="flex flex-wrap gap-2">                {searchHistory.map((historyItem, index) => (                  <button                    key={index}                    onClick={() => handleHistoryClick(historyItem)}                    className="px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm hover:bg-gray-200"                  >                    {historyItem}                  </button>                ))}              </div>            </div>          )}          {/* ê³ ê¸‰ ?„í„° */}          <div className="mb-6">            <button              onClick={() => setShowAdvancedFilters(!showAdvancedFilters)}              className="text-purple-600 hover:text-purple-700 text-sm font-medium"            >              {showAdvancedFilters ? '?„í„° ?¨ê¸°ê¸? : 'ê³ ê¸‰ ?„í„° ë³´ê¸°'} ??            </button>                        {showAdvancedFilters && (              <div className="mt-4 p-4 bg-gray-50 rounded-lg">                <div className="grid grid-cols-2 md:grid-cols-4 gap-4">                  {/* ì¹´í…Œê³ ë¦¬ */}                  <div>                    <label className="block text-sm font-medium text-gray-700 mb-1">ì¹´í…Œê³ ë¦¬</label>                    <select                      value={filters.category}                      onChange={(e) => setFilters(prev => ({ ...prev, category: e.target.value }))}                      className="w-full p-2 border border-gray-300 rounded text-sm focus:ring-2 focus:ring-purple-500"                    >                      <option value="">?„ì²´</option>                      <option value="ì¶•êµ¬??>ì¶•êµ¬??/option>                      <option value="? ë‹ˆ??>? ë‹ˆ??/option>                      <option value="ë³´í˜¸?¥ë¹„">ë³´í˜¸?¥ë¹„</option>                      <option value="ë³??¥ë¹„">ë³??¥ë¹„</option>                      <option value="?¸ë ˆ?´ë‹">?¸ë ˆ?´ë‹</option>                      <option value="ê¸°í?">ê¸°í?</option>                    </select>                  </div>                  {/* ê°€ê²?ë²”ìœ„ */}                  <div>                    <label className="block text-sm font-medium text-gray-700 mb-1">ìµœì†Œ ê°€ê²?/label>                    <input                      type="number"                      value={filters.priceRange.min}                      onChange={(e) => setFilters(prev => ({                         ...prev,                         priceRange: { ...prev.priceRange, min: Number(e.target.value) }                      }))}                      className="w-full p-2 border border-gray-300 rounded text-sm focus:ring-2 focus:ring-purple-500"                    />                  </div>                  <div>                    <label className="block text-sm font-medium text-gray-700 mb-1">ìµœë? ê°€ê²?/label>                    <input                      type="number"                      value={filters.priceRange.max}                      onChange={(e) => setFilters(prev => ({                         ...prev,                         priceRange: { ...prev.priceRange, max: Number(e.target.value) }                      }))}                      className="w-full p-2 border border-gray-300 rounded text-sm focus:ring-2 focus:ring-purple-500"                    />                  </div>                  {/* ?íƒœ ?±ê¸‰ */}                  <div>                    <label className="block text-sm font-medium text-gray-700 mb-1">?íƒœ ?±ê¸‰</label>                    <select                      value={filters.condition}                      onChange={(e) => setFilters(prev => ({ ...prev, condition: e.target.value }))}                      className="w-full p-2 border border-gray-300 rounded text-sm focus:ring-2 focus:ring-purple-500"                    >                      <option value="">?„ì²´</option>                      <option value="A">A - ìµœìƒ</option>                      <option value="B">B - ??/option>                      <option value="C">C - ??/option>                    </select>                  </div>                </div>              </div>            )}          </div>          {/* ?•ë ¬ ?µì…˜ */}          <div className="mb-6 flex justify-between items-center">            <div className="flex items-center space-x-4">              <span className="text-sm font-medium text-gray-700">?•ë ¬:</span>              <select                value={sortBy}                onChange={(e) => setSortBy(e.target.value as any)}                className="p-2 border border-gray-300 rounded text-sm focus:ring-2 focus:ring-purple-500"              >                <option value="relevance">ê´€?¨ë„??/option>                <option value="distance">ê±°ë¦¬??/option>                <option value="price">ê°€ê²©ìˆœ</option>                <option value="freshness">ìµœì‹ ??/option>              </select>            </div>                        {results.length > 0 && (              <p className="text-sm text-gray-600">                ì´?<span className="font-semibold">{results.length}ê°?/span>??ê²°ê³¼              </p>            )}          </div>          {/* ?ëŸ¬ ë©”ì‹œì§€ */}          {error && (            <div className="mb-4 p-3 bg-red-50 border border-red-200 rounded text-red-700 text-sm">              {error}            </div>          )}          {/* ê²€??ê²°ê³¼ */}          <div>            {isSearching && (              <div className="text-center py-12">                <div className="w-12 h-12 border-4 border-purple-200 border-t-purple-600 rounded-full animate-spin mx-auto mb-4"></div>                <p className="text-gray-600">AIê°€ ê²€?‰í•˜ê³??ˆìŠµ?ˆë‹¤...</p>                <p className="text-sm text-gray-500 mt-1">                  {searchType === 'text' && '?ìŠ¤??ë¶„ì„ ì¤?..'}                  {searchType === 'image' && '?´ë?ì§€ ë¶„ì„ ì¤?..'}                  {searchType === 'voice' && '?Œì„± ?¸ì‹ ì¤?..'}                  {searchType === 'semantic' && '?˜ë? ë¶„ì„ ì¤?..'}                </p>              </div>            )}            {!isSearching && results.length === 0 && searchQuery && (              <div className="text-center py-12">                <div className="text-gray-400 text-4xl mb-4">?”</div>                <p className="text-gray-600">ê²€??ê²°ê³¼ê°€ ?†ìŠµ?ˆë‹¤.</p>                <p className="text-sm text-gray-500 mt-1">?¤ë¥¸ ê²€?‰ì–´???„í„°ë¥??œë„?´ë³´?¸ìš”.</p>              </div>            )}            {!isSearching && results.length > 0 && (              <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">                {results.map((item) => (                  <div                    key={item.id}                    onClick={() => onItemSelect(item.id)}                    className="border rounded-lg p-4 hover:shadow-lg transition cursor-pointer group"                  >                    {/* ?í’ˆ ?´ë?ì§€ */}                    <div className="aspect-square bg-gray-100 rounded-lg mb-3 overflow-hidden">                      <img                        src={item.imageUrl}                        alt={item.title}                        className="w-full h-full object-cover group-hover:scale-105 transition"                      />                    </div>                    {/* ?í’ˆ ?•ë³´ */}                    <div className="space-y-2">                      <h4 className="font-medium text-gray-900 line-clamp-2 group-hover:text-purple-600 transition">                        {item.title}                      </h4>                                            <p className="text-sm text-gray-600 line-clamp-2">                        {item.description}                      </p>                                            <div className="flex items-center justify-between">                        <span className="text-lg font-bold text-purple-600">                          {item.price.toLocaleString()}??                        </span>                        {item.distance !== undefined && (                          <span className="text-sm text-gray-500">                            ?“ {item.distance < 1 ? `${Math.round(item.distance * 1000)}m` : `${item.distance.toFixed(1)}km`}                          </span>                        )}                      </div>                      <div className="flex items-center justify-between text-sm">                        <span className="text-gray-600">{item.category}</span>                        <span className="text-gray-500">{item.region}</span>                      </div>                      {/* AI ?ˆì§ˆ ?ìˆ˜ */}                      {item.ai?.quality_score && (                        <div className="space-y-1">                          <div className="flex items-center justify-between text-xs">                            <span className="text-gray-500">?ˆì§ˆ ?ìˆ˜</span>                            <span className="text-gray-700 font-medium">                              {Math.round(item.ai.quality_score * 100)}%                            </span>                          </div>                          <div className="w-full bg-gray-200 rounded-full h-2">                            <div                              className="bg-purple-600 h-2 rounded-full transition-all"                              style={{ width: `${item.ai.quality_score * 100}%` }}                            ></div>                          </div>                        </div>                      )}                      {/* ??‚¹ ?ìˆ˜ */}                      <div className="pt-2 border-t border-gray-100">                        <div className="flex items-center justify-between text-xs">                          <span className="text-gray-500">ì¢…í•© ?ìˆ˜</span>                          <span className="text-purple-600 font-semibold">                            {Math.round(((item as any).finalScore || 0) * 100)}??                          </span>                        </div>                        <div className="w-full bg-gray-200 rounded-full h-1.5">                          <div                            className="bg-gradient-to-r from-purple-500 to-blue-500 h-1.5 rounded-full transition-all"                            style={{ width: `${((item as any).finalScore || 0) * 100}%` }}                          ></div>                        </div>                      </div>                    </div>                  </div>                ))}              </div>            )}          </div>        </div>      </div>    </div>  );} 
