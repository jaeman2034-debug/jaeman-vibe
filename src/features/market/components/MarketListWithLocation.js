"use strict";
// src/features/market/components/MarketListWithLocation.tsximport React, { useEffect, useState } from 'react';import { useLocationStore } from '@/stores/locationStore';import MarketCard from './MarketCard';import LocationSetup from '@/components/location/LocationSetup';// ?�시 ?�품 ?�이??const mockProducts = [  {    id: '1',    title: '?�이??축구??,    price: 80000,    category: '축구??,    condition: 'used',    images: ['https://example.com/soccer-shoes.jpg'],    location: { lat: 37.5665, lng: 126.9780, accuracy: 10 },    region_dong: '?�성??,    region_sigungu: '강남�?,    region_full: '?�울?�별??강남�??�성??,    status: 'active',    ownerId: 'user123',    createdAt: new Date()  },  {    id: '2',    title: '?�디?�스 ?�니??,    price: 50000,    category: '?�니??,    condition: 'new',    images: ['https://example.com/uniform.jpg'],    location: { lat: 37.5665, lng: 126.9780, accuracy: 15 },    region_dong: '??��??,    region_sigungu: '강남�?,    region_full: '?�울?�별??강남�???��??,    status: 'active',    ownerId: 'user456',    createdAt: new Date()  },  {    id: '3',    title: '축구�?,    price: 30000,    category: '�??�비',    condition: 'used',    images: ['https://example.com/soccer-ball.jpg'],    location: { lat: 37.5665, lng: 126.9780, accuracy: 20 },    region_dong: '�?��??,    region_sigungu: '강남�?,    region_full: '?�울?�별??강남�?�?��??,    status: 'active',    ownerId: 'user789',    createdAt: new Date()  }];export function MarketListWithLocation() {  const { userLoc, load, isLoading } = useLocationStore();  const [showLocationSetup, setShowLocationSetup] = useState(false);  // 컴포?�트 마운?????�?�된 ?�치 ?�보 ?�동 로드  useEffect(() => {    load(); // localStorage?�서 ?�치 ?�보 ?�어?�기  }, [load]);  const handleProductClick = (product: any) => {    console.log('?�품 ?�릭:', product);    // ?�품 ?�세 ?�이지�??�동 ?�는 모달 ?�기  };  const handleLocationSet = (location: { lat: number; lng: number; accuracy?: number }) => {    console.log('?�치 ?�정??', location);    setShowLocationSetup(false);  };  return (    <div className="p-6 space-y-6">      <div className="flex items-center justify-between">        <h1 className="text-2xl font-bold">?�포�?마켓</h1>                {/* ?�치 ?�정 버튼 */}        <button          onClick={() => setShowLocationSetup(!showLocationSetup)}          className="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors"        >          {userLoc ? '?�� ?�치 ?�정?? : '?�� ?�치 ?�정'}        </button>      </div>      {/* ?�치 ?�정 ?�널 */}      {showLocationSetup && (        <div className="bg-gray-50 p-4 rounded-lg">          <LocationSetup            onLocationSet={handleLocationSet}            showCurrentLocation={true}          />        </div>      )}      {/* ?�재 ?�치 ?�태 ?�시 */}      {userLoc && (        <div className="bg-green-50 p-3 rounded-lg border border-green-200">          <div className="text-sm text-green-800">            <strong>?�� ?�재 ?�치:</strong> {userLoc.lat.toFixed(6)}, {userLoc.lng.toFixed(6)}            {userLoc.accuracy && ` (?�확?? ${userLoc.accuracy}m)`}          </div>          <div className="text-xs text-green-600 mt-1">            거리 기반 ?�렬 �??�터링이 ?�성?�되?�습?�다.          </div>        </div>      )}      {/* ?�품 목록 */}      <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">        {mockProducts.map((product) => (          <MarketCard            key={product.id}            item={product}            onClick={handleProductClick}            showDistance={true} // ?�용???�치가 ?�으�?거리 ?�시          />        ))}      </div>      {/* ?�치 ?�보가 ?�을 ???�내 */}      {!userLoc && !isLoading && (        <div className="text-center py-8 text-gray-500">          <div className="text-lg mb-2">?�� ?�치 ?�보�??�정?�주?�요</div>          <div className="text-sm">            ?�치�??�정?�면 ?�품과의 거리�??�인?????�습?�다.          </div>          <button            onClick={() => setShowLocationSetup(true)}            className="mt-4 px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors"          >            ?�치 ?�정?�기          </button>        </div>      )}      {/* 로딩 ?�태 */}      {isLoading && (        <div className="text-center py-8 text-gray-500">          <div className="text-lg">?�� ?�치 ?�인 �?..</div>        </div>      )}    </div>  );}export default MarketListWithLocation; 
