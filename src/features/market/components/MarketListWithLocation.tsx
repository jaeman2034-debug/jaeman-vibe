// src/features/market/components/MarketListWithLocation.tsximport React, { useEffect, useState } from 'react';import { useLocationStore } from '@/stores/locationStore';import MarketCard from './MarketCard';import LocationSetup from '@/components/location/LocationSetup';// ?ˆì‹œ ?í’ˆ ?°ì´??const mockProducts = [  {    id: '1',    title: '?˜ì´??ì¶•êµ¬??,    price: 80000,    category: 'ì¶•êµ¬??,    condition: 'used',    images: ['https://example.com/soccer-shoes.jpg'],    location: { lat: 37.5665, lng: 126.9780, accuracy: 10 },    region_dong: '?¼ì„±??,    region_sigungu: 'ê°•ë‚¨êµ?,    region_full: '?œìš¸?¹ë³„??ê°•ë‚¨êµ??¼ì„±??,    status: 'active',    ownerId: 'user123',    createdAt: new Date()  },  {    id: '2',    title: '?„ë””?¤ìŠ¤ ? ë‹ˆ??,    price: 50000,    category: '? ë‹ˆ??,    condition: 'new',    images: ['https://example.com/uniform.jpg'],    location: { lat: 37.5665, lng: 126.9780, accuracy: 15 },    region_dong: '??‚¼??,    region_sigungu: 'ê°•ë‚¨êµ?,    region_full: '?œìš¸?¹ë³„??ê°•ë‚¨êµ???‚¼??,    status: 'active',    ownerId: 'user456',    createdAt: new Date()  },  {    id: '3',    title: 'ì¶•êµ¬ê³?,    price: 30000,    category: 'ë³??¥ë¹„',    condition: 'used',    images: ['https://example.com/soccer-ball.jpg'],    location: { lat: 37.5665, lng: 126.9780, accuracy: 20 },    region_dong: 'ì²?‹´??,    region_sigungu: 'ê°•ë‚¨êµ?,    region_full: '?œìš¸?¹ë³„??ê°•ë‚¨êµ?ì²?‹´??,    status: 'active',    ownerId: 'user789',    createdAt: new Date()  }];export function MarketListWithLocation() {  const { userLoc, load, isLoading } = useLocationStore();  const [showLocationSetup, setShowLocationSetup] = useState(false);  // ì»´í¬?ŒíŠ¸ ë§ˆìš´?????€?¥ëœ ?„ì¹˜ ?•ë³´ ?ë™ ë¡œë“œ  useEffect(() => {    load(); // localStorage?ì„œ ?„ì¹˜ ?•ë³´ ?½ì–´?¤ê¸°  }, [load]);  const handleProductClick = (product: any) => {    console.log('?í’ˆ ?´ë¦­:', product);    // ?í’ˆ ?ì„¸ ?˜ì´ì§€ë¡??´ë™ ?ëŠ” ëª¨ë‹¬ ?´ê¸°  };  const handleLocationSet = (location: { lat: number; lng: number; accuracy?: number }) => {    console.log('?„ì¹˜ ?¤ì •??', location);    setShowLocationSetup(false);  };  return (    <div className="p-6 space-y-6">      <div className="flex items-center justify-between">        <h1 className="text-2xl font-bold">?¤í¬ì¸?ë§ˆì¼“</h1>                {/* ?„ì¹˜ ?¤ì • ë²„íŠ¼ */}        <button          onClick={() => setShowLocationSetup(!showLocationSetup)}          className="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors"        >          {userLoc ? '?“ ?„ì¹˜ ?¤ì •?? : '?“ ?„ì¹˜ ?¤ì •'}        </button>      </div>      {/* ?„ì¹˜ ?¤ì • ?¨ë„ */}      {showLocationSetup && (        <div className="bg-gray-50 p-4 rounded-lg">          <LocationSetup            onLocationSet={handleLocationSet}            showCurrentLocation={true}          />        </div>      )}      {/* ?„ì¬ ?„ì¹˜ ?íƒœ ?œì‹œ */}      {userLoc && (        <div className="bg-green-50 p-3 rounded-lg border border-green-200">          <div className="text-sm text-green-800">            <strong>?“ ?„ì¬ ?„ì¹˜:</strong> {userLoc.lat.toFixed(6)}, {userLoc.lng.toFixed(6)}            {userLoc.accuracy && ` (?•í™•?? ${userLoc.accuracy}m)`}          </div>          <div className="text-xs text-green-600 mt-1">            ê±°ë¦¬ ê¸°ë°˜ ?•ë ¬ ë°??„í„°ë§ì´ ?œì„±?”ë˜?ˆìŠµ?ˆë‹¤.          </div>        </div>      )}      {/* ?í’ˆ ëª©ë¡ */}      <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">        {mockProducts.map((product) => (          <MarketCard            key={product.id}            item={product}            onClick={handleProductClick}            showDistance={true} // ?¬ìš©???„ì¹˜ê°€ ?ˆìœ¼ë©?ê±°ë¦¬ ?œì‹œ          />        ))}      </div>      {/* ?„ì¹˜ ?•ë³´ê°€ ?†ì„ ???ˆë‚´ */}      {!userLoc && !isLoading && (        <div className="text-center py-8 text-gray-500">          <div className="text-lg mb-2">?“ ?„ì¹˜ ?•ë³´ë¥??¤ì •?´ì£¼?¸ìš”</div>          <div className="text-sm">            ?„ì¹˜ë¥??¤ì •?˜ë©´ ?í’ˆê³¼ì˜ ê±°ë¦¬ë¥??•ì¸?????ˆìŠµ?ˆë‹¤.          </div>          <button            onClick={() => setShowLocationSetup(true)}            className="mt-4 px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors"          >            ?„ì¹˜ ?¤ì •?˜ê¸°          </button>        </div>      )}      {/* ë¡œë”© ?íƒœ */}      {isLoading && (        <div className="text-center py-8 text-gray-500">          <div className="text-lg">?“ ?„ì¹˜ ?•ì¸ ì¤?..</div>        </div>      )}    </div>  );}export default MarketListWithLocation; 
