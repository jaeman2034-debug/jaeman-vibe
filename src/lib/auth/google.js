"use strict";
// src/lib/auth/google.tsimport {  GoogleAuthProvider,  signInWithPopup,  signInWithRedirect,  getRedirectResult,} from 'firebase/auth';import { auth } from '@/lib/firebase'; // ?�로?�트??auth ?�스?�스 경로??맞게 조정const provider = new GoogleAuthProvider();// ?�앱 브라?��?/?�이??감�?export const isInApp =  /FBAN|FBAV|Instagram|KAKAOTALK|KAKAOSTORY|NAVER|Line|Daum|Whale|Twitter/i.test(    navigator.userAgent  );export const isIOS = /iPad|iPhone|iPod/.test(navigator.userAgent);// ???�작 ??리다?�렉??결과 복원(??초기????1???�출)export async function resumeRedirect() {  try {    const res = await getRedirectResult(auth);    if (res?.user) {      console.info('[AUTH] redirect result received:', res.user.uid);      return res.user;    }  } catch (e) {    console.error('[AUTH] redirect result error:', e);  }  return null;}// ?�경???�라 ?�업/리다?�렉???�택 + ?�업 ?�패 ??리다?�렉???�백export async function loginWithGoogle() {  const useRedirect = isInApp || isIOS;  try {    if (useRedirect) {      await signInWithRedirect(auth, provider);      return;    }    await signInWithPopup(auth, provider);  } catch (e: any) {    if (      e?.code === 'auth/popup-blocked' ||      e?.code === 'auth/popup-closed-by-user' ||      e?.code === 'auth/operation-not-supported-in-this-environment'    ) {      await signInWithRedirect(auth, provider);      return;    }    throw e;  }}
