// src/lib/auth/google.tsimport {  GoogleAuthProvider,  signInWithPopup,  signInWithRedirect,  getRedirectResult,} from 'firebase/auth';import { auth } from '@/lib/firebase'; // ?„ë¡œ?íŠ¸??auth ?¸ìŠ¤?´ìŠ¤ ê²½ë¡œ??ë§ê²Œ ì¡°ì •const provider = new GoogleAuthProvider();// ?¸ì•± ë¸Œë¼?°ì?/?„ì´??ê°ì?export const isInApp =  /FBAN|FBAV|Instagram|KAKAOTALK|KAKAOSTORY|NAVER|Line|Daum|Whale|Twitter/i.test(    navigator.userAgent  );export const isIOS = /iPad|iPhone|iPod/.test(navigator.userAgent);// ???œì‘ ??ë¦¬ë‹¤?´ë ‰??ê²°ê³¼ ë³µì›(??ì´ˆê¸°????1???¸ì¶œ)export async function resumeRedirect() {  try {    const res = await getRedirectResult(auth);    if (res?.user) {      console.info('[AUTH] redirect result received:', res.user.uid);      return res.user;    }  } catch (e) {    console.error('[AUTH] redirect result error:', e);  }  return null;}// ?˜ê²½???°ë¼ ?ì—…/ë¦¬ë‹¤?´ë ‰??? íƒ + ?ì—… ?¤íŒ¨ ??ë¦¬ë‹¤?´ë ‰???´ë°±export async function loginWithGoogle() {  const useRedirect = isInApp || isIOS;  try {    if (useRedirect) {      await signInWithRedirect(auth, provider);      return;    }    await signInWithPopup(auth, provider);  } catch (e: any) {    if (      e?.code === 'auth/popup-blocked' ||      e?.code === 'auth/popup-closed-by-user' ||      e?.code === 'auth/operation-not-supported-in-this-environment'    ) {      await signInWithRedirect(auth, provider);      return;    }    throw e;  }}