// src/lib/locationService.tsexport type LatLng = { lat: number; lng: number; accuracy?: number };export async function getCurrentLocation(): Promise<LatLng> {  return new Promise((resolve, reject) => {    navigator.geolocation.getCurrentPosition(      p => resolve({ lat: p.coords.latitude, lng: p.coords.longitude, accuracy: p.coords.accuracy }),      reject,      { enableHighAccuracy: true, timeout: 10000, maximumAge: 0 }    );  });}export async function reverseGeocode(lat: number, lng: number) {  const key = import.meta.env.VITE_KAKAO_REST_KEY; // ?? 026b65...    if (!key) {    throw new Error('VITE_KAKAO_REST_KEYê°€ ?¤ì •?˜ì? ?Šì•˜?µë‹ˆ??');  }  try {    const res = await fetch(      `https://dapi.kakao.com/v2/local/geo/coord2regioncode.json?x=${lng}&y=${lat}`,      { headers: { Authorization: `KakaoAK ${key}` } }    );        if (!res.ok) {      throw new Error(`ì¹´ì¹´??API ?¤ë¥˜: ${res.status}`);    }        const data = await res.json();        if (!data.documents || data.documents.length === 0) {      throw new Error('?„ì¹˜ ?•ë³´ë¥?ì°¾ì„ ???†ìŠµ?ˆë‹¤.');    }        // ?‰ì •???•ë³´ ?°ì„  (H), ?†ìœ¼ë©?ë²•ì •??(B)    const r = data.documents.find((d: any) => d.region_type === 'H') ?? data.documents[0];        return {      sido: r.region_1depth_name,      sigungu: r.region_2depth_name,      dong: r.region_3depth_name,      full: `${r.region_1depth_name} ${r.region_2depth_name} ${r.region_3depth_name}`,      regionType: r.region_type,      regionCode: r.code    };  } catch (error) {    console.error('????¤ì½”???¤íŒ¨:', error);    throw error;  }}// ?„ì¹˜ ?•ë³´ ê²€ì¦?export function validateLocation(lat: number, lng: number): boolean {  return (    lat >= -90 && lat <= 90 &&    lng >= -180 && lng <= 180 &&    !isNaN(lat) && !isNaN(lng)  );}// ?„ì¹˜ ?•ë³´ ?•ê·œ??export function normalizeLocation(lat: number, lng: number): { lat: number; lng: number } {  return {    lat: Number(lat.toFixed(6)),    lng: Number(lng.toFixed(6))  };} 
