// src/lib/parse-ko-email.tsexport type ExtractEmailResult = {    value: string;   // ?•ê·œ?”ëœ email (?±ê³µ ??    ok: boolean;     // ?Œì‹± ?±ê³µ ?¬ë?    seg?: string;    // ?¡ì•„??êµ¬ê°„ (?”ë²„ê·¸ìš©)    s?: string;      // ?•ê·œ??ì¤‘ê°„ ë¬¸ì??(?”ë²„ê·¸ìš©)  };    const PROVIDER_KO: Record<string, string> = {    'ì§€ë©”ì¼': 'gmail', 'ì§€ ë©”ì¼': 'gmail', 'gë©”ì¼': 'gmail', 'gmail': 'gmail',    '?¤ì´ë²?: 'naver', '?¤ì´ë²?: 'naver', 'naver': 'naver',    '?¤ìŒ': 'daum', '?œë©”??: 'hanmail', 'daum': 'daum', 'hanmail': 'hanmail',    'ì¹´ì¹´??: 'kakao', 'ì¹´ì¹´?¤ë©”??: 'kakao', 'kakao': 'kakao',    '?¼í›„': 'yahoo', 'yahoo': 'yahoo',    '?«ë©”??: 'hotmail', '??ë©”ì¼': 'hotmail', 'hotmail': 'hotmail',    '?„ì›ƒë£?: 'outlook', 'outlook': 'outlook',  };    const TLD_KO: Record<string, string> = {    '?·ì»´': 'com', 'ì»?: 'com', 'ì½?: 'com', 'com': 'com',    '??: 'net', 'net': 'net',    '?¤ì•Œì§€': 'org', '?¤ì???: 'org', 'org': 'org',    'ì¼€?´ì•Œ': 'kr', 'kr': 'kr',    'ì½?: 'co', '?¨ì˜¤': 'co', 'co': 'co',  };    /** ?œêµ­??ë°œí™” ?•ê·œ?? ?œê³¨ë±…ì´/??ì§€ë©”ì¼/?·ì»´ ?¦â€???"@", ".", "gmail", "com" */  function normalizeUtterance(s: string): string {    s = s      .replace(/ê³?s*ë±?s*????at/gi, ' @ ')      .replace(/?????„íŠ¸|dot/gi, ' . ')      // ë©”ì¼ ê´€???¡ë‹¨???œê±°      .replace(        /(??s*ë©?s*(?:?????\s*(?:????ë¥?ë¯?|??s*ë©??´ë©œ|ë©?s*??ë©”ì¼|?´ë©”??ë©”ì¼|ì£¼ì†Œ|?€|?????…ë‹ˆ???´ì—???ˆìš”|ë§í• ê²??¤ì‹œ|?œë²ˆ|ê·¸ë¦¬ê³?ê·¸ëŸ°??/gi,        ' ',      );      for (const [k, v] of Object.entries(PROVIDER_KO)) {      s = s.replace(new RegExp(k, 'gi'), ` ${v} `);    }    for (const [k, v] of Object.entries(TLD_KO)) {      s = s.replace(new RegExp(k, 'gi'), ` ${v} `);    }      return s.replace(/\s+/g, ' ').trim();  }    /** ?´ë©”?????©ì–´ë¦?ë½‘ê¸° */  export function extractEmail(raw: string): ExtractEmailResult {    // ?œì´ë©”ì¼?€/ë©”ì¼?€/?´ë©œ?€ ??(?¬ê¸°ë¶€?????¸ë¦¬ê±?    const TRIG =      /(?:??s*ë©?s*(?:?????\s*(?:????ë¥?ë¯?|??s*ë©??´ë©œ|ë©?s*??ë©”ì¼)\s*(?:?€|????:)?\s*/i;      // ?¬ê¸° ?˜ì˜¤ë©??´ë©”???¤ëª… ??    const STOP =      /(?„í™”|ë²ˆí˜¸|ë¹„ë?ë²ˆí˜¸|ë¹„ë²ˆ|?´ë¦„|???…ë‹ˆ???´ì—???ˆìš”|?¤ì‹œ ë§??¬ì§ˆë¬?ì§ˆë¬¸|ì£¼ì†Œ ??/i;      const m = raw.match(      new RegExp(TRIG.source + '([\\s\\S]{0,120}?)(?=' + STOP.source + '|$)', 'i'),    );    const seg = m?.[1] ?? raw; // ?¸ë¦¬ê±°ê? ?†ìœ¼ë©??µì§¸ë¡??œë„    const s = normalizeUtterance(seg);      // id @ provider . tld  (id ë¶€ë¶„ì? ê³µë°±/???ˆìš© ??ìµœì¢… ?•ê·œ?”ì—???œê±°)    const em = s.match(/([A-Za-z0-9._\- ]+)\s*@\s*([A-Za-z0-9\-]+)\s*\.\s*([A-Za-z]{2,6})/);    if (!em) return { value: '', ok: false, seg, s };      const id = em[1].replace(/[\s.]/g, '').toLowerCase(); // ?œjae. man 2034?????œjaeman2034??    const host = em[2].toLowerCase();    const tld = em[3].toLowerCase();      return { value: `${id}@${host}.${tld}`, ok: true, seg, s };  }  