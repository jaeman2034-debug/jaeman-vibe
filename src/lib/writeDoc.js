export async function createDoc(collectionName, data, ownerId) { } // ?�� products 컬렉?�인 경우 ?�재 ?�치 ?�동 가?�오�?  let currentLocation = null;  if (collectionName === "products") {    try {      currentLocation = await getCurrentLocation();      console.log("[CREATE] createDoc - ?�재 ?�치 가?�옴:", currentLocation);    } catch (error) {      console.warn("[CREATE] createDoc - ?�치 가?�오�??�패:", error);    }  }  const doc = {    ...data,    ownerId,    // ?�� products??경우 ?�치 ?�보 추�?    ...(collectionName === "products" && currentLocation && {      loc: {        lat: currentLocation.lat,        lng: currentLocation.lng,      },      addr: {        hjdStatus: 'pending' as const      }    }),    createdAt: serverTimestamp(),     // ?�� rules?�서 request.time ?�구    keywords: buildKeywords(data),    // ?�� ?�동?�성 ?�확???�상  };  return addDoc(collection(db, collectionName), doc);}function buildKeywords(d: BaseDoc): string[] {  const parts = [    d.title,    d.category,    d.location,    ...(d.tags ?? []),  ]    .filter(Boolean)    .map((s) => String(s).toLowerCase());  // 간단 n-gram prefix  const tokens = new Set<string>();  for (const p of parts) {    const words = p.split(/[^a-z0-9가-??+/i).filter(Boolean);    for (const w of words) {      tokens.add(w);      for (let i = 1; i <= Math.min(w.length, 10); i++) {        tokens.add(w.slice(0, i));      }    }  }  return Array.from(tokens).slice(0, 200);} 
