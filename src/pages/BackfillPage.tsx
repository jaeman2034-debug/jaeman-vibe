import React, { useState } from 'react';import { backfillAllSellerId, backfillSellerId, backfillMarketSellerId } from '@/utils/backfillSellerId';export default function BackfillPage() {  const [loading, setLoading] = useState(false);  const [result, setResult] = useState<any>(null);  const [error, setError] = useState<string | null>(null);  const handleBackfillAll = async () => {    if (!confirm('?觳 sellerId 氚表???ろ?瓴?旯? ???? ?毽?????.')) {      return;    }    setLoading(true);    setError(null);    setResult(null);    try {      const result = await backfillAllSellerId();      setResult(result);      console.log('氚表 ?耄:', result);    } catch (err: any) {      setError(err.message || '氚表 ?ろ 欷??る臧 氚??.');      console.error('氚表 ?る:', err);    } finally {      setLoading(false);    }  };  const handleBackfillProducts = async () => {    if (!confirm('products 旎??sellerId 氚表???ろ?瓴?旯?')) {      return;    }    setLoading(true);    setError(null);    setResult(null);    try {      const result = await backfillSellerId();      setResult({ products: result });      console.log('products 氚表 ?耄:', result);    } catch (err: any) {      setError(err.message || '氚表 ?ろ 欷??る臧 氚??.');      console.error('氚表 ?る:', err);    } finally {      setLoading(false);    }  };  const handleBackfillMarket = async () => {    if (!confirm('market 旎??sellerId 氚表???ろ?瓴?旯?')) {      return;    }    setLoading(true);    setError(null);    setResult(null);    try {      const result = await backfillMarketSellerId();      setResult({ market: result });      console.log('market 氚表 ?耄:', result);    } catch (err: any) {      setError(err.message || '氚表 ?ろ 欷??る臧 氚??.');      console.error('氚表 ?る:', err);    } finally {      setLoading(false);    }  };  return (    <div className="p-6 max-w-4xl mx-auto">      <h1 className="text-2xl font-bold mb-6">SellerId 氚表 ?鸽Μ</h1>            <div className="mb-6 p-4 bg-yellow-50 border border-yellow-200 rounded-lg">        <h2 className="text-lg font-semibold text-yellow-800 mb-2">?锔 欤检?</h2>        <ul className="text-sm text-yellow-700 space-y-1">          <li>?????? 旮办〈 氍胳毳????搿??毽?????</li>          <li>??氚表 ? Firestore 氚膘??甓?╇??/li>          <li>??臧氚/????瓴? 毹检? ?ろ?措炒?胳</li>          <li>??瓿检 氚╈?毳?? 氍胳??100ms 歆?办 ??</li>        </ul>      </div>      <div className="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">        <button          onClick={handleBackfillAll}          disabled={loading}          className="p-4 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed"        >          {loading ? '?ろ 欷?..' : '?觳 氚表 ?ろ'}        </button>                <button          onClick={handleBackfillProducts}          disabled={loading}          className="p-4 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed"        >          {loading ? '?ろ 欷?..' : 'Products 旎?毵'}        </button>                <button          onClick={handleBackfillMarket}          disabled={loading}          className="p-4 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed"        >          {loading ? '?ろ 欷?..' : 'Market 旎?毵'}        </button>      </div>      {error && (        <div className="mb-6 p-4 bg-red-50 border border-red-200 rounded-lg">          <h3 className="text-lg font-semibold text-red-800 mb-2">???る 氚</h3>          <p className="text-red-700">{error}</p>        </div>      )}      {result && (        <div className="mb-6 p-4 bg-green-50 border border-green-200 rounded-lg">          <h3 className="text-lg font-semibold text-green-800 mb-2">??氚表 ?耄</h3>          <pre className="text-sm text-green-700 bg-white p-3 rounded border overflow-auto">            {JSON.stringify(result, null, 2)}          </pre>        </div>      )}      <div className="text-sm text-gray-600">        <h3 className="font-semibold mb-2">氚表 ????:</h3>        <ul className="space-y-1">          <li>??sellerId (?办? 1)</li>          <li>??seller.uid (?办? 2)</li>          <li>??ownerId (?办? 3)</li>          <li>??createdBy (?办? 4)</li>          <li>??uid (?办? 5)</li>        </ul>      </div>    </div>  );}
