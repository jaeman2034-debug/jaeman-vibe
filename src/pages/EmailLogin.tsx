import React, { useState } from "react";import { getAuth, signInWithEmailAndPassword, sendPasswordResetEmail } from "firebase/auth";// ?¬ëŒì¹œí™”?ì¸ ?¸ì¦ ?¤ë¥˜ ë©”ì‹œì§€ ë§¤í•‘const AUTH_MSG: Record<string, string> = {  'auth/user-not-found': 'ê°€?…ë˜ì§€ ?Šì? ?´ë©”?¼ì…?ˆë‹¤.',  'auth/wrong-password': 'ë¹„ë?ë²ˆí˜¸ê°€ ?¬ë°”ë¥´ì? ?ŠìŠµ?ˆë‹¤.',  'auth/invalid-credential': '?´ë©”???ëŠ” ë¹„ë?ë²ˆí˜¸ê°€ ?¬ë°”ë¥´ì? ?ŠìŠµ?ˆë‹¤.',  'auth/too-many-requests': '?”ì²­??ë§ìŠµ?ˆë‹¤. ? ì‹œ ???¤ì‹œ ?œë„?˜ì„¸??',  'auth/network-request-failed': '?¤íŠ¸?Œí¬ ?¤ë¥˜?…ë‹ˆ?? ?¸í„°???°ê²°???•ì¸?´ì£¼?¸ìš”.',  'auth/invalid-email': '?¬ë°”ë¥??´ë©”???•ì‹???„ë‹™?ˆë‹¤.',  default: 'ë¡œê·¸?¸ì— ?¤íŒ¨?ˆìŠµ?ˆë‹¤. ? ì‹œ ???¤ì‹œ ?œë„?˜ì„¸??',};function humanize(code?: string) {  return (code && AUTH_MSG[code]) || `${AUTH_MSG.default}${code ? ` (${code})` : ''}`;}export default function EmailLogin() {  const auth = getAuth();  const params = new URLSearchParams(window.location.search);  const [email, setEmail] = useState(params.get("email") || "");  const [password, setPassword] = useState("");  const [msg, setMsg] = useState<string | null>(null);  const [loading, setLoading] = useState(false);  const onLogin = async (e: React.FormEvent) => {    e.preventDefault();    setLoading(true);    setMsg(null);    try {      await signInWithEmailAndPassword(auth, email.trim(), password);      setMsg("ë¡œê·¸???±ê³µ! ? ì‹œ ???´ë™?©ë‹ˆ??");      // ?„ìš” ?? window.location.href = "/";    } catch (err: any) {      // Firebase ?¤ë¥˜ ì½”ë“œ/ë©”ì‹œì§€ë§?ë¡œê¹… (ë¯¼ê° ?•ë³´ ?œì™¸)      console.error('[AUTH] EmailLogin error:', err?.code, err?.message);      setMsg(humanize(err?.message)); // err.message??'auth/...' ì½”ë“œê°€ ?´ê²¨??    } finally {      setLoading(false);    }  };  const onReset = async () => {    if (!email) return setMsg("ë¹„ë?ë²ˆí˜¸ ?¬ì„¤??ë©”ì¼??ë³´ë‚¼ ?´ë©”?¼ì„ ?…ë ¥??ì£¼ì„¸??");    setLoading(true);    setMsg(null);    try {      await sendPasswordResetEmail(auth, email.trim());      setMsg("ë¹„ë?ë²ˆí˜¸ ?¬ì„¤??ë©”ì¼??ë³´ëƒˆ?µë‹ˆ?? ë©”ì¼?¨ì„ ?•ì¸??ì£¼ì„¸??");    } catch (err: any) {      setMsg(err?.message ?? "?¬ì„¤??ë©”ì¼ ?„ì†¡???¤íŒ¨?ˆìŠµ?ˆë‹¤.");    } finally {      setLoading(false);    }  };  return (    <div style={{ maxWidth: 420, margin: "48px auto", padding: 24, border: "1px solid #333", borderRadius: 12 }}>      <h2 style={{ marginTop: 0 }}>?´ë©”??ë¡œê·¸??/h2>      <form onSubmit={onLogin}>        <div style={{ marginBottom: 8 }}>          <input            value={email}            onChange={(e) => setEmail(e.target.value)}            type="email"            placeholder="you@example.com"            required            style={{ width: "100%", padding: 10 }}          />        </div>        <div style={{ marginBottom: 8 }}>          <input            value={password}            onChange={(e) => setPassword(e.target.value)}            type="password"            placeholder="ë¹„ë?ë²ˆí˜¸"            required            style={{ width: "100%", padding: 10 }}          />        </div>        <button disabled={loading} style={{ width: "100%", padding: 12 }}>          {loading ? "ë¡œê·¸??ì¤?.." : "ë¡œê·¸??}        </button>      </form>      <button onClick={onReset} disabled={loading} style={{ width: "100%", padding: 12, marginTop: 8 }}>        ë¹„ë?ë²ˆí˜¸ ?¬ì„¤??ë©”ì¼ ë³´ë‚´ê¸?      </button>      {msg && (        <div style={{ marginTop: 12, padding: 10, background: "#111", border: "1px solid #444" }}>          {msg}        </div>      )}    </div>  );}