import { useState } from 'react';
export default function ImageOptimizationTest() { const [selectedFiles, setSelectedFiles] = useState([]); const [processedFiles, setProcessedFiles] = useState([]); const [isProcessing, setIsProcessing] = useState(false); const [results, setResults] = useState([]); const handleImagesSelected = (files) => { setSelectedFiles(files); }; const processImages = async () => { if (selectedFiles.length === 0)
    return; setIsProcessing(true); const newResults = []; try {
    for (const file of selectedFiles) {
        console.log(`처리 �? ${file.name}`);
    }
}
finally { } }; } // 메�??�이??추출        const metadata = await extractImageMetadata(file);                // ?�질 ?�수 계산        const qualityScore = await calculateImageQuality(file);                // 배경 ?�거 + 리사?�즈        const backgroundRemovalResult = await removeBackgroundAndResize(file);                // ?�맷 변??(WebP)        const webpFile = await convertImageFormat(file, 'webp', 0.9);                // ?�맷 변??(AVIF)        const avifFile = await convertImageFormat(file, 'avif', 0.9);        newResults.push({          original: file,          metadata,          qualityScore,          backgroundRemoval: backgroundRemovalResult,          webp: webpFile,          avif: avifFile        });      }      setProcessedFiles(selectedFiles);      setResults(newResults);          } catch (error) {      console.error('?��?지 처리 ?�패:', error);    } finally {      setIsProcessing(false);    }  };  return (    <div className="container mx-auto px-4 py-8">      <h1 className="text-3xl font-bold mb-8">?��?지 최적???�스??/h1>            <div className="grid grid-cols-1 lg:grid-cols-2 gap-8">        {/* ?��?지 ?�로??*/}        <div>          <h2 className="text-xl font-semibold mb-4">?��?지 ?�로??/h2>          <AdvancedImageUpload            onImagesSelected={handleImagesSelected}            maxFiles={5}            maxFileSize={10}            enableBackgroundRemoval={true}            enableQualityCheck={true}            qualityThreshold={70}          />                    {selectedFiles.length > 0 && (            <div className="mt-4">              <button                onClick={processImages}                disabled={isProcessing}                className="w-full bg-blue-600 text-white py-3 px-4 rounded-lg hover:bg-blue-700 disabled:opacity-50"              >                {isProcessing ? '처리 �?..' : '?��?지 최적???�작'}              </button>            </div>          )}        </div>        {/* 결과 ?�시 */}        <div>          <h2 className="text-xl font-semibold mb-4">처리 결과</h2>                    {results.length > 0 && (            <div className="space-y-4">              {results.map((result, index) => (                <div key={index} className="border rounded-lg p-4 bg-gray-50">                  <h3 className="font-medium mb-2">{result.original.name}</h3>                                    <div className="grid grid-cols-2 gap-4 text-sm">                    <div>                      <strong>?�본 ?�기:</strong> {result.metadata.width} × {result.metadata.height}                    </div>                    <div>                      <strong>?�일 ?�기:</strong> {(result.metadata.size / 1024 / 1024).toFixed(2)} MB                    </div>                    <div>                      <strong>?�질 ?�수:</strong> {(result.qualityScore * 100).toFixed(1)}%                    </div>                    <div>                      <strong>배경 ?�거:</strong> {result.backgroundRemoval.success ? '?�공' : '?�패'}                    </div>                  </div>                                    <div className="mt-3 flex space-x-2">                    <div className="text-xs">                      <strong>WebP:</strong> {(result.webp.size / 1024 / 1024).toFixed(2)} MB                    </div>                    <div className="text-xs">                      <strong>AVIF:</strong> {(result.avif.size / 1024 / 1024).toFixed(2)} MB                    </div>                  </div>                </div>              ))}            </div>          )}                    {isProcessing && (            <div className="text-center py-8">              <div className="w-8 h-8 border-4 border-blue-200 border-t-blue-600 rounded-full animate-spin mx-auto mb-4"></div>              <p className="text-gray-600">?��?지�?처리?�고 ?�습?�다...</p>            </div>          )}        </div>      </div>    </div>  );} 
