import React, { useState } from 'react';import { AIProductAnalysis } from '../../components/ai/AIProductAnalysis';import { MultiImageUpload } from '../../components/ai/MultiImageUpload';import { useAIFeatures, type AIAnalysisResult } from '../../hooks/useAIFeatures';type AnalysisMode = 'single' | 'multiple';export default function AIProductWorkflow() {  const [showAnalysis, setShowAnalysis] = useState(false);  const [analysisMode, setAnalysisMode] = useState<AnalysisMode>('single');  const [analysisResults, setAnalysisResults] = useState<AIAnalysisResult[]>([]);  const { lastAnalysis, lastError, clearAnalysis } = useAIFeatures();  const handleSingleAnalysisComplete = (result: AIAnalysisResult) => {    setAnalysisResults(prev => [...prev, result]);    setShowAnalysis(false);    clearAnalysis();  };  const handleMultipleAnalysisComplete = (results: AIAnalysisResult[]) => {    setAnalysisResults(prev => [...prev, ...results]);    setShowAnalysis(false);    clearAnalysis();  };  const handleCloseAnalysis = () => {    setShowAnalysis(false);    clearAnalysis();  };  const clearResults = () => {    setAnalysisResults([]);  };  const openAnalysis = (mode: AnalysisMode) => {    setAnalysisMode(mode);    setShowAnalysis(true);  };  return (    <div className="min-h-screen bg-gray-50 py-8">      <div className="max-w-6xl mx-auto px-4">        {/* ?¤ë” */}        <div className="text-center mb-8">          <h1 className="text-4xl font-bold text-gray-900 mb-4">            AI ?í’ˆ ë¶„ì„ ?Œí¬?Œë¡œ??          </h1>          <p className="text-lg text-gray-600 max-w-2xl mx-auto">            ?´ë?ì§€ë¥??…ë¡œ?œí•˜ë©?AIê°€ ?ë™?¼ë¡œ ì¹´í…Œê³ ë¦¬, ?œê·¸, ?ì„±, ?”ì•½??ë¶„ì„?˜ì—¬            ?í’ˆ ?±ë¡???„ì??œë¦½?ˆë‹¤.          </p>        </div>        {/* ë©”ì¸ ?¡ì…˜ */}        <div className="text-center mb-8">          <div className="flex flex-col sm:flex-row gap-4 justify-center">            <button              onClick={() => openAnalysis('single')}              className="bg-blue-600 text-white px-8 py-4 rounded-lg text-lg font-semibold hover:bg-blue-700 transition-colors shadow-lg"            >              ?? ?¨ì¼ ?´ë?ì§€ AI ë¶„ì„            </button>            <button              onClick={() => openAnalysis('multiple')}              className="bg-green-600 text-white px-8 py-4 rounded-lg text-lg font-semibold hover:bg-green-700 transition-colors shadow-lg"            >              ?“¸ ?¤ì¤‘ ?´ë?ì§€ AI ë¶„ì„            </button>          </div>        </div>        {/* ë¶„ì„ ê²°ê³¼ ëª©ë¡ */}        {analysisResults.length > 0 && (          <div className="mb-8">            <div className="flex items-center justify-between mb-6">              <h2 className="text-2xl font-bold text-gray-900">                ë¶„ì„ ê²°ê³¼ ({analysisResults.length})              </h2>              <button                onClick={clearResults}                className="px-4 py-2 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200 transition-colors"              >                ëª¨ë“  ê²°ê³¼ ì§€?°ê¸°              </button>            </div>            <div className="grid gap-6 md:grid-cols-2 lg:grid-cols-3">              {analysisResults.map((result, index) => (                <div                  key={index}                  className="bg-white rounded-lg shadow-md p-6 border border-gray-200"                >                  <div className="flex items-center justify-between mb-4">                    <h3 className="text-lg font-semibold text-gray-900">                      ë¶„ì„ #{index + 1}                    </h3>                    <span className="text-sm text-gray-500">                      {new Date().toLocaleDateString()}                    </span>                  </div>                  {/* ì¹´í…Œê³ ë¦¬ */}                  <div className="mb-3">                    <span className="text-sm font-medium text-gray-600">ì¹´í…Œê³ ë¦¬:</span>                    <span className="ml-2 px-2 py-1 bg-blue-100 text-blue-800 rounded text-sm">                      {result.category || 'ê¸°í?'}                    </span>                  </div>                  {/* ?œê·¸ */}                  <div className="mb-3">                    <span className="text-sm font-medium text-gray-600">?œê·¸:</span>                    <div className="flex flex-wrap gap-1 mt-1">                      {result.tags && result.tags.length > 0 ? (                        result.tags.slice(0, 5).map((tag, tagIndex) => (                          <span                            key={tagIndex}                            className="px-2 py-1 bg-gray-100 text-gray-700 rounded text-xs"                          >                            {tag}                          </span>                        ))                      ) : (                        <span className="text-gray-500 text-sm">?œê·¸ ?†ìŒ</span>                      )}                      {result.tags && result.tags.length > 5 && (                        <span className="px-2 py-1 bg-gray-200 text-gray-600 rounded text-xs">                          +{result.tags.length - 5}                        </span>                      )}                    </div>                  </div>                  {/* ?ì„± */}                  <div className="mb-3">                    <span className="text-sm font-medium text-gray-600">?ì„±:</span>                    <div className="grid grid-cols-2 gap-2 mt-1 text-sm">                      {result.attributes && Object.entries(result.attributes).map(([key, value]) => (                        <div key={key}>                          <span className="text-gray-500">{key}:</span>                          <span className="ml-1 text-gray-700">                            {value || '?????†ìŒ'}                          </span>                        </div>                      ))}                    </div>                  </div>                  {/* ?”ì•½ */}                  <div>                    <span className="text-sm font-medium text-gray-600">?”ì•½:</span>                    <p className="mt-1 text-gray-700 text-sm line-clamp-3">                      {result.summary || '?”ì•½ ?†ìŒ'}                    </p>                  </div>                  {/* ?¡ì…˜ ë²„íŠ¼ */}                  <div className="mt-4 flex gap-2">                    <button className="flex-1 px-3 py-2 bg-blue-100 text-blue-700 rounded text-sm hover:bg-blue-200 transition-colors">                      ?í’ˆ ?±ë¡???¬ìš©                    </button>                    <button className="px-3 py-2 bg-gray-100 text-gray-700 rounded text-sm hover:bg-gray-200 transition-colors">                      ë³µì‚¬                    </button>                  </div>                </div>              ))}            </div>          </div>        )}        {/* ê¸°ëŠ¥ ?¤ëª… */}        <div className="bg-white rounded-lg shadow-md p-8">          <h2 className="text-2xl font-bold text-gray-900 mb-6">            ?¯ AI ?í’ˆ ë¶„ì„ ê¸°ëŠ¥          </h2>                    <div className="grid md:grid-cols-2 gap-8">            <div>              <h3 className="text-lg font-semibold text-gray-900 mb-4">                ??ì£¼ìš” ê¸°ëŠ¥              </h3>              <ul className="space-y-2 text-gray-600">                <li>???´ë?ì§€?ì„œ ?í’ˆ ì¹´í…Œê³ ë¦¬ ?ë™ ?¸ì‹</li>                <li>??ê´€???œê·¸ ?ë™ ?ì„± (3-8ê°?</li>                <li>??ë¸Œëœ?? ?‰ìƒ, ?Œì¬, ?íƒœ ???ì„± ì¶”ì¶œ</li>                <li>???ë§¤???í’ˆ ?”ì•½ ?ë™ ?ì„±</li>                <li>???œë˜ê·????œë¡­ ?´ë?ì§€ ?…ë¡œ??/li>                <li>??ì»¤ìŠ¤?€ ë¶„ì„ ì§€?œì‚¬???…ë ¥</li>                <li>???¨ì¼/?¤ì¤‘ ?´ë?ì§€ ?™ì‹œ ë¶„ì„</li>              </ul>            </div>            <div>              <h3 className="text-lg font-semibold text-gray-900 mb-4">                ?”§ ê¸°ìˆ  ?¬ì–‘              </h3>              <ul className="space-y-2 text-gray-600">                <li>??ì§€???•ì‹: JPG, PNG, WebP</li>                <li>??ìµœë? ?¬ê¸°: 10MB (?ë™ ?•ì¶•)</li>                <li>??AI ëª¨ë¸: GPT-4o-mini</li>                <li>???‘ë‹µ ?œê°„: ?‰ê·  5-15ì´?/li>                <li>???¸ì–´: ?œêµ­??ìµœì ??/li>                <li>???¤ì‹œê°?ì§„í–‰ë¥??œì‹œ</li>                <li>???¤ì¤‘ ?´ë?ì§€ ë°°ì¹˜ ì²˜ë¦¬</li>              </ul>            </div>          </div>          <div className="mt-8 p-4 bg-blue-50 rounded-lg border border-blue-200">            <h4 className="font-semibold text-blue-900 mb-2">              ?’¡ ?¬ìš© ??            </h4>            <ul className="text-blue-800 text-sm space-y-1">              <li>???í’ˆ??ëª…í™•?˜ê²Œ ë³´ì´???´ë?ì§€ë¥??¬ìš©?˜ì„¸??/li>              <li>??ë°°ê²½??ê¹¨ë—?˜ê³  ì¡°ëª…??ì¢‹ì? ?¬ì§„??ë¶„ì„ ?•í™•?„ë? ?’ì…?ˆë‹¤</li>              <li>??ì»¤ìŠ¤?€ ?„ë¡¬?„íŠ¸ë¡??¹ì • ?•ë³´??ì§‘ì¤‘?????ˆìŠµ?ˆë‹¤</li>              <li>??ë¶„ì„ ê²°ê³¼???í’ˆ ?±ë¡ ?¼ì— ?ë™?¼ë¡œ ?ìš©?????ˆìŠµ?ˆë‹¤</li>              <li>???¬ëŸ¬ ?´ë?ì§€ë¥??™ì‹œ??ë¶„ì„?˜ë©´ ë¹„êµ ë¶„ì„??ê°€?¥í•©?ˆë‹¤</li>            </ul>          </div>        </div>        {/* AI ë¶„ì„ ëª¨ë‹¬ */}        {showAnalysis && (          <div className="fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4">            <div className="w-full max-w-6xl max-h-[90vh] overflow-y-auto">              {analysisMode === 'single' ? (                <AIProductAnalysis                  onAnalysisComplete={handleSingleAnalysisComplete}                  onClose={handleCloseAnalysis}                />              ) : (                <MultiImageUpload                  onAnalysisComplete={handleMultipleAnalysisComplete}                  onClose={handleCloseAnalysis}                  maxFiles={5}                />              )}            </div>          </div>        )}      </div>    </div>  );} 
