import { useEffect, useState } from 'react';import { searchNearby } from '@/lib/geoQuery';import { Link } from 'react-router-dom';import { getUserLocation } from '@/lib/location';import DistanceBadge from '@/components/market/DistanceBadge';export default function Nearby() {  const [items, setItems] = useState<any[]>([]);  const [err, setErr] = useState('');  const [radius, setRadius] = useState(5000);  const [userLocation, setUserLocation] = useState<{ lat: number; lng: number } | null>(null);  useEffect(() => {    const loadNearbyItems = async () => {      try {        // ?¬ìš©???„ì¹˜ ê°€?¸ì˜¤ê¸?        const location = await getUserLocation();        if (!location) {          setErr('?„ì¹˜ ?•ë³´ë¥?ê°€?¸ì˜¬ ???†ìŠµ?ˆë‹¤.');          return;        }                setUserLocation(location);                // ê·¼ì²˜ ?í’ˆ ê²€??        const res = await searchNearby(location.lat, location.lng, radius);        setItems(res);      } catch (error: any) {        console.error('ê·¼ì²˜ ?í’ˆ ê²€???¤íŒ¨:', error);        setErr(error?.message || 'ê·¼ì²˜ ?í’ˆ ê²€?‰ì— ?¤íŒ¨?ˆìŠµ?ˆë‹¤.');      }    };    loadNearbyItems();  }, [radius]);  if (err) return <div style={{padding:16}}>?„ì¹˜ ê¶Œí•œ???„ìš”?©ë‹ˆ?? {err}</div>;  return (    <div style={{padding:16}}>      <h3>??ì£¼ë?</h3>      <div style={{margin:'8px 0'}}>        ë°˜ê²½:        <select value={radius} onChange={e=>setRadius(Number(e.target.value))}>          <option value={1000}>1km</option>          <option value={3000}>3km</option>          <option value={5000}>5km</option>          <option value={10000}>10km</option>        </select>      </div>            {userLocation && (        <div style={{marginBottom: 16, fontSize: '14px', color: '#666'}}>          ?„ì¬ ?„ì¹˜: {userLocation.lat.toFixed(4)}, {userLocation.lng.toFixed(4)}        </div>      )}            {items.map(it => (        <Link key={it.id} to={`/market/${it.id}`} style={{display:'block', padding:'8px 0'}}>          <div style={{display: 'flex', justifyContent: 'space-between', alignItems: 'center'}}>            <span>{it.title}</span>            {it.geo && userLocation && (              <DistanceBadge                itemGeo={it.geo}                userLocation={userLocation}                showIcon={false}              />            )}          </div>        </Link>      ))}      {!items.length && <div>ì£¼ë? ?í’ˆ???†ìŠµ?ˆë‹¤.</div>}    </div>  );} 