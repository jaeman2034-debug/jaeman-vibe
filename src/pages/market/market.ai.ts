import type { PageAIHandler, PageAIPlugin, PageAIContext } from "@/voice/pageAI/types";const examples = [  "ì¶•êµ¬??ì¹´í…Œê³ ë¦¬ ë³´ì—¬ì¤?,  "ê°€ê²?????œìœ¼ë¡??•ë ¬",  "?œìš¸ë§?ë³´ì—¬ì¤?,  "ì²«ë²ˆì§???ª© ?´ì–´",  "???í’ˆ ?±ë¡",];function parseIndex(s: string): number | null {  const m = s.match(/(ì²????????¤ì„¯|1|2|3|4|5)/);  const map: Record<string, number> = { ì²?1, ??2, ??3, ??4, ?¤ì„¯:5 };  if (!m) return null;  const k = m[1];  return map[k] ?? parseInt(k, 10) || null;}export function makeMarketPlugin(): (ctx: PageAIContext) => PageAIPlugin {  const handle: PageAIHandler = async (input, ctx) => {    const s = input.replace(/\s+/g, "");    // ì¹´í…Œê³ ë¦¬    const mCat = input.match(/(.+?)\s*(ì¹´í…Œê³ ë¦¬|ë§?ë§Œë³´??ì°¾ì•„|ë³´ì—¬)/);    if (mCat) {      const cat = mCat[1].trim();      ctx.navigate(`/market?cat=${encodeURIComponent(cat)}`);      return true;    }    // ?•ë ¬    if (/??????¤ë¦„ì°¨ìˆœ|?€ê°€|?¼ìˆœ/.test(s)) {      const u = new URL(location.href);      u.searchParams.set("sort", "price_asc");      ctx.navigate(`/market${u.search}`);      return true;    }    if (/?’ì????´ë¦¼ì°¨ìˆœ|ê³ ê?|ë¹„ì‹¼??.test(s)) {      const u = new URL(location.href);      u.searchParams.set("sort", "price_desc");      ctx.navigate(`/market${u.search}`);      return true;    }    // ?„ì¹˜ ?„í„°(ê°„ë‹¨): "?œìš¸ë§? ??location=?œìš¸    const mLoc = input.match(/(.+?)ë§?s?ë³´ì—¬/);    if (mLoc) {      const loc = mLoc[1].trim();      const u = new URL(location.href);      u.searchParams.set("loc", loc);      ctx.navigate(`/market${u.search}`);      return true;    }    // Në²ˆì§¸ ?„ì´???´ê¸°    if (/ì²????????¤ì„¯|[1-5]ë²ˆì§¸?\s???ª©|?´ì–´/.test(input)) {      const n = parseIndex(input) ?? 1;      // ?¤ì œ ??ª© idë¥??????†ìœ¼ë¯€ë¡? ëª©ë¡ ì»´í¬?ŒíŠ¸?ì„œ data-index ??id ë§¤í•‘???¸ì¶œ?´ë‘ë©?ì¢‹ìŠµ?ˆë‹¤.      // ?¬ê¸°?œëŠ” ?°ëª¨ë¡?/market/item-n ?¼ë¡œ ?´ë™      ctx.navigate(`/market/item-${n}`);      return true;    }    // ?±ë¡ ?Œë¡œ??    if (/??? ê·œ|?í’ˆ\s??±ë¡/.test(s)) {      ctx.openModal("voice:register");      return true;    }    return false;  };  return (ctx) => ({ id: "market.core", pageId: "market", handle, examples });} 