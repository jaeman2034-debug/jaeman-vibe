"use strict";
// File: src/utils/speechPassword.ts// ?�성?�로 말한 비�?번호�??�전?�게 ?�스?�로 변??const DIGIT: Record<string, string> = {  "??: "0", "�?: "0", "�?: "0",  "??: "1", "??: "2", "??: "3", "??: "4",  "??: "5", "??: "6", "�?: "6", "�?: "7", "??: "8", "�?: "9",};const ALPHA: Record<string, string> = {  "?�이":"a","�?:"b","??:"c","??:"d","??:"e","?�프":"f","지":"g",  "?�이�?:"h","?�이":"i","?�이":"j","케??:"k","??:"l","??:"m","??:"n",  "??:"o","??:"p","??:"q","?�르":"r","?�스":"s","??:"t","??:"u",  "브이":"v","?�블??:"w","?�스":"x","?�??:"y","?�트":"z","지??:"z"};const REPL: Array<[string,string]> = [  ["?�페?�스", ""], ["?�어?�기", ""],  ["??,"."], ["�?,"."], ["??,"."],  ["?�이??,"-"], ["?�??,"-"], ["빼기","-"],  ["?�더�?,"_"], ["밑줄","_"],  ["�?,"*"], ["별표","*"], // ?�요 ???�용];// ?�용 문자(?�문 ?�/?? ?�자, ?�택 ?�수문자)const ALLOWED = /^[a-zA-Z0-9._\-*!@#$%^&+=?]+$/;function normalizeKoreanDigits(s: string) {  return s.replace(/[?�공빵일?�삼?�오?�륙칠팔�?+/g, (chunk) =>    chunk.split("").map(ch => DIGIT[ch] ?? ch).join("")  );}export function speechToPassword(raw: string, opts?: { spellMode?: boolean }) {  let s = (raw || "").trim().toLowerCase();  // ?�어 치환  for (const [k, v] of REPL) s = s.split(k).join(v);  // ?��? ?�자?�숫??  s = normalizeKoreanDigits(s);  if (opts?.spellMode) {    // 글???�위 ?�성(?�이 ?�이 ... / ?�이??...)    const tokens = s.split(/\s+/).filter(Boolean);    let out = "";    for (const tk of tokens) {      if (ALPHA[tk]) { out += ALPHA[tk]; continue; }      if (tk in DIGIT) { out += DIGIT[tk]; continue; }      if (/^[a-z0-9._\-*!@#$%^&+=?]+$/.test(tk)) { out += tk; continue; }    }    s = out;  } else {    // ?�반 모드: 공백 ?�거    s = s.replace(/\s+/g, "");  }  // 문장부?�성 말끝 ???�거  s = s.replace(/\.$/, "");  // ?�용 문자�??��?  s = Array.from(s).filter(ch => ALLOWED.test(ch)).join("");  return s;}export function validatePassword(pw: string) {  const len = pw.length >= 8;  const hasLetter = /[a-zA-Z]/.test(pw);  const hasNumber = /\d/.test(pw);  const hasSpecial = /[._\-*!@#$%^&+=?]/.test(pw);  const ok = len && hasLetter && hasNumber; // ?�구?�항: 문자+?�자(?�수문자 ?�택)  let score = 0;  if (len) score++;  if (hasLetter) score++;  if (hasNumber) score++;  if (hasSpecial) score++;  const level = score >= 4 ? "강함" : score === 3 ? "보통" : "?�함";  return { ok, len, hasLetter, hasNumber, hasSpecial, score, level };} 
