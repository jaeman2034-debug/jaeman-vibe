// File: src/utils/speechPassword.ts// ?Œì„±?¼ë¡œ ë§í•œ ë¹„ë?ë²ˆí˜¸ë¥??ˆì „?˜ê²Œ ?ìŠ¤?¸ë¡œ ë³€??const DIGIT: Record<string, string> = {  "??: "0", "ê³?: "0", "ë¹?: "0",  "??: "1", "??: "2", "??: "3", "??: "4",  "??: "5", "??: "6", "ë¥?: "6", "ì¹?: "7", "??: "8", "êµ?: "9",};const ALPHA: Record<string, string> = {  "?ì´":"a","ë¹?:"b","??:"c","??:"d","??:"e","?í”„":"f","ì§€":"g",  "?ì´ì¹?:"h","?„ì´":"i","?œì´":"j","ì¼€??:"k","??:"l","??:"m","??:"n",  "??:"o","??:"p","??:"q","?„ë¥´":"r","?ìŠ¤":"s","??:"t","??:"u",  "ë¸Œì´":"v","?”ë¸”??:"w","?‘ìŠ¤":"x","?€??:"y","?œíŠ¸":"z","ì§€??:"z"};const REPL: Array<[string,string]> = [  ["?¤í˜?´ìŠ¤", ""], ["?„ì–´?°ê¸°", ""],  ["??,"."], ["ì©?,"."], ["??,"."],  ["?˜ì´??,"-"], ["?€??,"-"], ["ë¹¼ê¸°","-"],  ["?¸ë”ë°?,"_"], ["ë°‘ì¤„","_"],  ["ë³?,"*"], ["ë³„í‘œ","*"], // ?„ìš” ???ˆìš©];// ?ˆìš© ë¬¸ì(?ë¬¸ ?€/?? ?«ì, ? íƒ ?¹ìˆ˜ë¬¸ì)const ALLOWED = /^[a-zA-Z0-9._\-*!@#$%^&+=?]+$/;function normalizeKoreanDigits(s: string) {  return s.replace(/[?ê³µë¹µì¼?´ì‚¼?¬ì˜¤?¡ë¥™ì¹ íŒ”êµ?+/g, (chunk) =>    chunk.split("").map(ch => DIGIT[ch] ?? ch).join("")  );}export function speechToPassword(raw: string, opts?: { spellMode?: boolean }) {  let s = (raw || "").trim().toLowerCase();  // ?¨ì–´ ì¹˜í™˜  for (const [k, v] of REPL) s = s.split(k).join(v);  // ?œê? ?«ì?’ìˆ«??  s = normalizeKoreanDigits(s);  if (opts?.spellMode) {    // ê¸€???¨ìœ„ ?©ì„±(?œì´ ?ì´ ... / ?¼ì´??...)    const tokens = s.split(/\s+/).filter(Boolean);    let out = "";    for (const tk of tokens) {      if (ALPHA[tk]) { out += ALPHA[tk]; continue; }      if (tk in DIGIT) { out += DIGIT[tk]; continue; }      if (/^[a-z0-9._\-*!@#$%^&+=?]+$/.test(tk)) { out += tk; continue; }    }    s = out;  } else {    // ?¼ë°˜ ëª¨ë“œ: ê³µë°± ?œê±°    s = s.replace(/\s+/g, "");  }  // ë¬¸ì¥ë¶€?¸ì„± ë§ë ???œê±°  s = s.replace(/\.$/, "");  // ?ˆìš© ë¬¸ìë§??¨ê?  s = Array.from(s).filter(ch => ALLOWED.test(ch)).join("");  return s;}export function validatePassword(pw: string) {  const len = pw.length >= 8;  const hasLetter = /[a-zA-Z]/.test(pw);  const hasNumber = /\d/.test(pw);  const hasSpecial = /[._\-*!@#$%^&+=?]/.test(pw);  const ok = len && hasLetter && hasNumber; // ?”êµ¬?¬í•­: ë¬¸ì+?«ì(?¹ìˆ˜ë¬¸ì ? íƒ)  let score = 0;  if (len) score++;  if (hasLetter) score++;  if (hasNumber) score++;  if (hasSpecial) score++;  const level = score >= 4 ? "ê°•í•¨" : score === 3 ? "ë³´í†µ" : "?½í•¨";  return { ok, len, hasLetter, hasNumber, hasSpecial, score, level };} 
