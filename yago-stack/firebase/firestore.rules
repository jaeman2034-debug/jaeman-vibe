rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    
    // === ğŸ§ ìŠ¤ë§ˆíŠ¸ ìŠ¤í”¼ì»¤ ë¸Œë¦¬í•‘ ì‹œìŠ¤í…œ ===
    
    // ai_voice_reports ì»¬ë ‰ì…˜ - ìŠ¤í”¼ì»¤ìš© ì½ê¸° í—ˆìš©
    match /ai_voice_reports/{docId} {
      // ê³µê°œ ì½ê¸° í—ˆìš© (Kakao Mini, Google Castìš©)
      allow read: if true;
      
      // ê´€ë¦¬ìë§Œ ì“°ê¸° í—ˆìš©
      allow write: if request.auth != null && 
                      request.auth.token.admin == true;
    }
    
    // notification_reports ì»¬ë ‰ì…˜ - ìŠ¤í”¼ì»¤ìš© ì½ê¸° í—ˆìš©
    match /notification_reports/{docId} {
      // ê³µê°œ ì½ê¸° í—ˆìš© (ìŠ¤ë§ˆíŠ¸ ìŠ¤í”¼ì»¤ìš©)
      allow read: if true;
      
      // ê´€ë¦¬ìë§Œ ì“°ê¸° í—ˆìš©
      allow write: if request.auth != null && 
                      request.auth.token.admin == true;
    }
    
    // notification_logs ì»¬ë ‰ì…˜ - ê´€ë¦¬ì ì½ê¸°, ì¸ì¦ëœ ì‚¬ìš©ì ì“°ê¸°
    match /notification_logs/{docId} {
      allow read: if request.auth != null && 
                      request.auth.token.admin == true;
      allow write: if request.auth != null;
    }
    
    // market_items ì»¬ë ‰ì…˜ - ê¸°ì¡´ ê·œì¹™ ìœ ì§€
    match /market_items/{docId} {
      allow read, write: if request.auth != null;
    }
    
    // ê¸°íƒ€ ì»¬ë ‰ì…˜ë“¤ì€ ì¸ì¦ëœ ì‚¬ìš©ìë§Œ ì ‘ê·¼
    match /{document=**} {
      allow read, write: if request.auth != null;
    }
  }
}
